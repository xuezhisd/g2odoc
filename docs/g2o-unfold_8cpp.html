<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>g2o: /home/xuezhisd/CLionProjects/g2o/g2o/examples/g2o_unfold/g2o-unfold.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">g2o
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_500bd004daf7f26e6762afdbadeff5f2.html">g2o</a></li><li class="navelem"><a class="el" href="dir_552567d00642e4a3c33c118b620e0838.html">examples</a></li><li class="navelem"><a class="el" href="dir_ae3644b7d407cf8b952ab704aee14292.html">g2o_unfold</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">g2o-unfold.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &quot;g2o/types/slam2d/types_three_dof.h&quot;</code><br />
<code>#include &quot;<a class="el" href="types__six__dof__expmap_8h_source.html">g2o/types/sba/types_six_dof_expmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types__seven__dof__expmap_8h_source.html">g2o/types/sim3/types_seven_dof_expmap.h</a>&quot;</code><br />
<code>#include &quot;g2o/types/slam3d/types_six_dof_quat.h&quot;</code><br />
<code>#include &quot;<a class="el" href="types__sba_8h_source.html">g2o/types/sba/types_sba.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="estimate__propagator_8h_source.html">g2o/core/estimate_propagator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sparse__optimizer_8h_source.html">g2o/core/sparse_optimizer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">g2o/stuff/macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="command__args_8h_source.html">g2o/stuff/command_args.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesys__tools_8h_source.html">g2o/stuff/filesys_tools.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__tools_8h_source.html">g2o/stuff/string_tools.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tools_8h_source.html">tools.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="block__solver_8h_source.html">g2o/core/block_solver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="linear__solver__cholmod_8h_source.html">g2o/solvers/cholmod/linear_solver_cholmod.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="linear__solver__csparse_8h_source.html">g2o/solvers/csparse/linear_solver_csparse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="linear__solver__pcg_8h_source.html">g2o/solvers/pcg/linear_solver_pcg.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for g2o-unfold.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="g2o-unfold_8cpp__incl.png" border="0" usemap="#_2home_2xuezhisd_2CLionProjects_2g2o_2g2o_2examples_2g2o__unfold_2g2o-unfold_8cpp" alt=""/></div>
<map name="_2home_2xuezhisd_2CLionProjects_2g2o_2g2o_2examples_2g2o__unfold_2g2o-unfold_8cpp" id="_2home_2xuezhisd_2CLionProjects_2g2o_2g2o_2examples_2g2o__unfold_2g2o-unfold_8cpp">
<area shape="rect" id="node9" href="types__six__dof__expmap_8h.html" title="g2o/types/sba/types\l_six_dof_expmap.h" alt="" coords="657,199,797,240"/>
<area shape="rect" id="node20" href="macros_8h.html" title="g2o/stuff/macros.h" alt="" coords="412,556,543,583"/>
<area shape="rect" id="node26" href="types__sba_8h.html" title="types_sba.h" alt="" coords="572,295,665,322"/>
<area shape="rect" id="node30" href="types__seven__dof__expmap_8h.html" title="g2o/types/sim3/types\l_seven_dof_expmap.h" alt="" coords="809,109,962,151"/>
<area shape="rect" id="node33" href="estimate__propagator_8h.html" title="g2o/core/estimate_propagator.h" alt="" coords="1132,295,1337,322"/>
<area shape="rect" id="node34" href="sparse__optimizer_8h.html" title="sparse_optimizer.h" alt="" coords="1934,385,2066,411"/>
<area shape="rect" id="node37" href="command__args_8h.html" title="g2o/stuff/command_args.h" alt="" coords="1981,117,2158,143"/>
<area shape="rect" id="node39" href="filesys__tools_8h.html" title="g2o/stuff/filesys_tools.h" alt="" coords="2182,117,2343,143"/>
<area shape="rect" id="node40" href="string__tools_8h.html" title="g2o/stuff/string_tools.h" alt="" coords="1751,117,1905,143"/>
<area shape="rect" id="node42" href="tools_8h.html" title="tools.h" alt="" coords="1272,385,1333,411"/>
<area shape="rect" id="node44" href="block__solver_8h.html" title="g2o/core/block_solver.h" alt="" coords="2317,295,2477,322"/>
<area shape="rect" id="node48" href="linear__solver__cholmod_8h.html" title="g2o/solvers/cholmod\l/linear_solver_cholmod.h" alt="" coords="2502,288,2669,329"/>
<area shape="rect" id="node49" href="linear__solver__csparse_8h.html" title="g2o/solvers/csparse\l/linear_solver_csparse.h" alt="" coords="2131,288,2293,329"/>
<area shape="rect" id="node50" href="linear__solver__pcg_8h.html" title="g2o/solvers/pcg/linear\l_solver_pcg.h" alt="" coords="2693,288,2843,329"/>
<area shape="rect" id="node10" href="base__vertex_8h.html" title="g2o/core/base_vertex.h" alt="" coords="787,385,946,411"/>
<area shape="rect" id="node23" href="base__binary__edge_8h.html" title="g2o/core/base_binary\l_edge.h" alt="" coords="565,377,712,419"/>
<area shape="rect" id="node24" href="se3__ops_8h.html" title="g2o/types/slam3d/se3\l_ops.h" alt="" coords="1409,377,1559,419"/>
<area shape="rect" id="node11" href="optimizable__graph_8h.html" title="optimizable_graph.h" alt="" coords="1219,474,1357,501"/>
<area shape="rect" id="node14" href="openmp__mutex_8h.html" title="openmp_mutex.h" alt="" coords="1685,556,1808,583"/>
<area shape="rect" id="node15" href="hyper__graph_8h.html" title="hyper_graph.h" alt="" coords="1325,556,1429,583"/>
<area shape="rect" id="node19" href="g2o__core__api_8h.html" title="g2o_core_api.h" alt="" coords="2023,631,2134,657"/>
<area shape="rect" id="node27" href="base__multi__edge_8h.html" title="g2o/core/base_multi\l_edge.h" alt="" coords="763,467,901,508"/>
<area shape="rect" id="node28" href="sbacam_8h.html" title="sbacam.h" alt="" coords="361,385,439,411"/>
<area shape="rect" id="node29" href="g2o__types__sba__api_8h.html" title="g2o_types_sba_api.h" alt="" coords="198,474,343,501"/>
<area shape="rect" id="node31" href="sim3_8h.html" title="sim3.h" alt="" coords="923,295,984,322"/>
<area shape="rect" id="node35" href="sparse__block__matrix_8h.html" title="sparse_block_matrix.h" alt="" coords="2193,474,2346,501"/>
<area shape="rect" id="node36" href="batch__stats_8h.html" title="batch_stats.h" alt="" coords="2472,474,2573,501"/>
<area shape="rect" id="node38" href="g2o__stuff__api_8h.html" title="g2o_stuff_api.h" alt="" coords="2111,206,2222,233"/>
<area shape="rect" id="node43" href="hyper__dijkstra_8h.html" title="g2o/core/hyper_dijkstra.h" alt="" coords="1027,474,1195,501"/>
<area shape="rect" id="node45" href="solver_8h.html" title="solver.h" alt="" coords="2334,385,2402,411"/>
<area shape="rect" id="node46" href="linear__solver_8h.html" title="linear_solver.h" alt="" coords="2477,385,2584,411"/>
<area shape="rect" id="node47" href="sparse__block__matrix__diagonal_8h.html" title="sparse_block_matrix\l_diagonal.h" alt="" coords="2649,467,2791,508"/>
</map>
</div>
</div>
<p><a href="g2o-unfold_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structInvChi2CostFunction.html">InvChi2CostFunction</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structIncrementalEdgesCompare.html">IncrementalEdgesCompare</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort Edges for inserting them sequentially.  <a href="structIncrementalEdgesCompare.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a08f118beb1131a64f4d3c727135f6e23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#a08f118beb1131a64f4d3c727135f6e23">updateDisplay</a> (ostream &amp;os, const <a class="el" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a> &amp;optimizer)</td></tr>
<tr class="separator:a08f118beb1131a64f4d3c727135f6e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473df2f01cbbb0738fa5ef23ef644e8f"><td class="memItemLeft" align="right" valign="top">SparseOptimizer::Method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#a473df2f01cbbb0738fa5ef23ef644e8f">str2method</a> (const std::string &amp;strMethod)</td></tr>
<tr class="separator:a473df2f01cbbb0738fa5ef23ef644e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af18c628ce008471dd04279a4742e72a9"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:af18c628ce008471dd04279a4742e72a9"><td class="memTemplItemLeft" align="right" valign="top">T::LinearSolverType *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#af18c628ce008471dd04279a4742e72a9">allocateLinearSolver</a> (bool useCholmod)</td></tr>
<tr class="separator:af18c628ce008471dd04279a4742e72a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba9329b3ddf15e7a134d788488a509e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classg2o_1_1Solver.html">Solver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#a6ba9329b3ddf15e7a134d788488a509e">str2solver</a> (const std::string &amp;strSolver_, <a class="el" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a> *opt)</td></tr>
<tr class="separator:a6ba9329b3ddf15e7a134d788488a509e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae640416800bf16ebf5fd5138ecf8e797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a> (string gnudump, string file_suffix, HyperGraph::EdgeSet::const_iterator begin, HyperGraph::EdgeSet::const_iterator end, bool dumpEdges, bool dumpFeatures)</td></tr>
<tr class="separator:ae640416800bf16ebf5fd5138ecf8e797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab04eaf4e282d2fffaa829c9a33257723"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a> (string gnudump, string file_suffix, HyperGraph::EdgeSet::const_iterator begin, HyperGraph::EdgeSet::const_iterator end)</td></tr>
<tr class="separator:ab04eaf4e282d2fffaa829c9a33257723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b754c0c882b4e0ade5d367261594d4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#a6b754c0c882b4e0ade5d367261594d4f">sigquit_handler</a> (int q __attribute__((unused)))</td></tr>
<tr class="separator:a6b754c0c882b4e0ade5d367261594d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aae9e4710a628ff039453f90a3c639be9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2o-unfold_8cpp.html#aae9e4710a628ff039453f90a3c639be9">hasToStop</a> =false</td></tr>
<tr class="separator:aae9e4710a628ff039453f90a3c639be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af18c628ce008471dd04279a4742e72a9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T::LinearSolverType* allocateLinearSolver </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCholmod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00153">153</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (useCholmod) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#ifdef GO_CHOLMOD_SUPPORT</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classg2o_1_1LinearSolverCholmod.html">LinearSolverCholmod&lt;typename T::PoseMatrixType&gt;</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classg2o_1_1LinearSolverCSparse.html">LinearSolverCSparse&lt;typename T::PoseMatrixType&gt;</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="ttc" id="classg2o_1_1LinearSolverCSparse_html"><div class="ttname"><a href="classg2o_1_1LinearSolverCSparse.html">g2o::LinearSolverCSparse</a></div><div class="ttdoc">linear solver which uses CSparse </div><div class="ttdef"><b>Definition:</b> <a href="linear__solver__csparse_8h_source.html#l00071">linear_solver_csparse.h:71</a></div></div>
<div class="ttc" id="classg2o_1_1LinearSolverCholmod_html"><div class="ttname"><a href="classg2o_1_1LinearSolverCholmod.html">g2o::LinearSolverCholmod</a></div><div class="ttdoc">basic solver for Ax = b which has to reimplemented for different linear algebra libraries ...</div><div class="ttdef"><b>Definition:</b> <a href="linear__solver__cholmod_8h_source.html#l00076">linear_solver_cholmod.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae640416800bf16ebf5fd5138ecf8e797"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gnudump_edges </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gnudump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>file_suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyperGraph::EdgeSet::const_iterator&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyperGraph::EdgeSet::const_iterator&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dumpEdges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dumpFeatures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00220">220</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>References <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2()</a>, <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError()</a>, <a class="el" href="base__vertex_8h_source.html#l00099">g2o::BaseVertex&lt; D, T &gt;::estimate()</a>, <a class="el" href="string__tools_8cpp_source.html#l00095">g2o::formatString()</a>, <a class="el" href="filesys__tools_8cpp_source.html#l00060">g2o::getFileExtension()</a>, <a class="el" href="filesys__tools_8cpp_source.html#l00069">g2o::getPureFilename()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00383">g2o::OptimizableGraph::Edge::robustKernel()</a>, and <a class="el" href="types_2slam2d_2se2_8h_source.html#l00108">g2o::SE2::toVector()</a>.</p>

<p>Referenced by <a class="el" href="g2o-unfold_8cpp_source.html#l00324">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                         {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// ------- </span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">string</span> baseName = <a class="code" href="namespaceg2o.html#aa0cecec46f211d82d5024175e81d8645">getPureFilename</a>(gnudump);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordtype">string</span> extension = <a class="code" href="namespaceg2o.html#a800261342e6831b847191c082623b3c0">getFileExtension</a>(gnudump);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">string</span> newFilename = <a class="code" href="group__utils.html#gad0337c8d47498031405bf9275831048c">formatString</a>(<span class="stringliteral">&quot;%s_%s.%s&quot;</span>, baseName.c_str(), file_suffix.c_str(), extension.c_str());</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Gnudump (&quot;</span> &lt;&lt; newFilename &lt;&lt; <span class="stringliteral">&quot;)...  &quot;</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    ofstream fout(newFilename.c_str());</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator eit = begin; eit != end; ++eit) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(<span class="keyword">const_cast&lt;</span><a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>*<span class="keyword">&gt;</span>(*eit));</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">computeError</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span>(e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">robustKernel</a>())</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        e-&gt;robustifyError();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordtype">double</span> edgeChi2 = e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">chi2</a>();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>* from = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(0));</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>* to   = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(1));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   </div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="namespaceg2o.html#a7164296103512f87be0ba49be53b7e67">dumpEdges</a>) { </div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (from &amp;&amp; to) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    Vector3d p1 = from-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#ad503ad3fec190146e5df39a90377c9b1">toVector</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Vector3d p2 = to-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#ad503ad3fec190146e5df39a90377c9b1">toVector</a>();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    fout &lt;&lt; p1[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p1[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p1[2] &lt;&lt;  <span class="stringliteral">&quot; &quot;</span> &lt;&lt; edgeChi2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    fout &lt;&lt; p2[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p2[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p1[2] &lt;&lt;  <span class="stringliteral">&quot; &quot;</span> &lt;&lt; edgeChi2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    fout &lt;&lt; endl;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">if</span>(dumpFeatures) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>* tox  = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(1));</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (from &amp;&amp; tox) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    Vector3d p1 = from-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#ad503ad3fec190146e5df39a90377c9b1">toVector</a>();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    Vector2d p2 = tox-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    fout &lt;&lt; p1[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p1[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p1[2] &lt;&lt;  <span class="stringliteral">&quot; &quot;</span> &lt;&lt; edgeChi2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    fout &lt;&lt; p2[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p2[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; edgeChi2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    fout &lt;&lt; endl;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    fout.close();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="ttc" id="namespaceg2o_html_a800261342e6831b847191c082623b3c0"><div class="ttname"><a href="namespaceg2o.html#a800261342e6831b847191c082623b3c0">g2o::getFileExtension</a></div><div class="ttdeci">std::string getFileExtension(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="filesys__tools_8cpp_source.html#l00060">filesys_tools.cpp:60</a></div></div>
<div class="ttc" id="classg2o_1_1SE2_html_ad503ad3fec190146e5df39a90377c9b1"><div class="ttname"><a href="classg2o_1_1SE2.html#ad503ad3fec190146e5df39a90377c9b1">g2o::SE2::toVector</a></div><div class="ttdeci">Vector3D toVector() const </div><div class="ttdoc">convert to a 3D vector (x, y, theta) </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2se2_8h_source.html#l00108">se2.h:108</a></div></div>
<div class="ttc" id="namespaceg2o_html_a7164296103512f87be0ba49be53b7e67"><div class="ttname"><a href="namespaceg2o.html#a7164296103512f87be0ba49be53b7e67">g2o::dumpEdges</a></div><div class="ttdeci">bool dumpEdges(std::ostream &amp;os, const OptimizableGraph &amp;optimizer)</div><div class="ttdef"><b>Definition:</b> <a href="output__helper_8cpp_source.html#l00180">output_helper.cpp:180</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a182bd2c109d50283c638d9b295f2f3d7"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2</a></div><div class="ttdeci">virtual double chi2() const =0</div><div class="ttdoc">computes the chi2 based on the cached error value, only valid after computeError has been called...</div></div>
<div class="ttc" id="classg2o_1_1VertexSE2_html"><div class="ttname"><a href="classg2o_1_1VertexSE2.html">g2o::VertexSE2</a></div><div class="ttdoc">2D pose Vertex, (x,y,theta) </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__se2_8h_source.html#l00041">vertex_se2.h:41</a></div></div>
<div class="ttc" id="group__utils_html_gad0337c8d47498031405bf9275831048c"><div class="ttname"><a href="group__utils.html#gad0337c8d47498031405bf9275831048c">g2o::formatString</a></div><div class="ttdeci">std::string formatString(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="string__tools_8cpp_source.html#l00095">string_tools.cpp:95</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_aeb6ce9f3bf7b896f58272ea0d3feb8ff"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">g2o::OptimizableGraph::Edge::robustKernel</a></div><div class="ttdeci">RobustKernel * robustKernel() const </div><div class="ttdoc">if NOT NULL, error of this edge will be robustifed with the kernel </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00383">optimizable_graph.h:383</a></div></div>
<div class="ttc" id="classg2o_1_1VertexPointXY_html"><div class="ttname"><a href="classg2o_1_1VertexPointXY.html">g2o::VertexPointXY</a></div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__point__xy_8h_source.html#l00039">vertex_point_xy.h:39</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a1e6d9f4128866982de5e11e03edd7775"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError</a></div><div class="ttdeci">virtual void computeError()=0</div></div>
<div class="ttc" id="namespaceg2o_html_aa0cecec46f211d82d5024175e81d8645"><div class="ttname"><a href="namespaceg2o.html#aa0cecec46f211d82d5024175e81d8645">g2o::getPureFilename</a></div><div class="ttdeci">std::string getPureFilename(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="filesys__tools_8cpp_source.html#l00069">filesys_tools.cpp:69</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html">g2o::HyperGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00165">hyper_graph.h:165</a></div></div>
<div class="ttc" id="classg2o_1_1BaseVertex_html_abb9caa0d2d00af70e95963a11ee9660a"><div class="ttname"><a href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">g2o::BaseVertex::estimate</a></div><div class="ttdeci">const EstimateType &amp; estimate() const </div><div class="ttdoc">return the current estimate of the vertex </div><div class="ttdef"><b>Definition:</b> <a href="base__vertex_8h_source.html#l00099">base_vertex.h:99</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html">g2o::OptimizableGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00349">optimizable_graph.h:349</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab04eaf4e282d2fffaa829c9a33257723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gnudump_features </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gnudump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>file_suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyperGraph::EdgeSet::const_iterator&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyperGraph::EdgeSet::const_iterator&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00279">279</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>References <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2()</a>, <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError()</a>, <a class="el" href="base__vertex_8h_source.html#l00099">g2o::BaseVertex&lt; D, T &gt;::estimate()</a>, <a class="el" href="string__tools_8cpp_source.html#l00095">g2o::formatString()</a>, <a class="el" href="filesys__tools_8cpp_source.html#l00060">g2o::getFileExtension()</a>, <a class="el" href="filesys__tools_8cpp_source.html#l00069">g2o::getPureFilename()</a>, and <a class="el" href="optimizable__graph_8h_source.html#l00383">g2o::OptimizableGraph::Edge::robustKernel()</a>.</p>

<p>Referenced by <a class="el" href="g2o-unfold_8cpp_source.html#l00324">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                               {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// ------- </span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">string</span> baseName = <a class="code" href="namespaceg2o.html#aa0cecec46f211d82d5024175e81d8645">getPureFilename</a>(gnudump);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">string</span> extension = <a class="code" href="namespaceg2o.html#a800261342e6831b847191c082623b3c0">getFileExtension</a>(gnudump);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">string</span> newFilename = <a class="code" href="group__utils.html#gad0337c8d47498031405bf9275831048c">formatString</a>(<span class="stringliteral">&quot;%s_%s.%s&quot;</span>, baseName.c_str(), file_suffix.c_str(), extension.c_str());</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Gnudump (&quot;</span> &lt;&lt; newFilename &lt;&lt; <span class="stringliteral">&quot;)...  &quot;</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    ofstream fout(newFilename.c_str());</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    </div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator eit = begin; eit != end; ++eit) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      </div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*eit);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">computeError</a>();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span>(e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">robustKernel</a>())</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        e-&gt;robustifyError();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordtype">double</span> edgeChi2 = e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">chi2</a>();</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>* tox  = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(1));</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (tox) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  Vector2d p2 = tox-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  fout &lt;&lt; p2[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p2[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; edgeChi2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    fout.close();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="ttc" id="namespaceg2o_html_a800261342e6831b847191c082623b3c0"><div class="ttname"><a href="namespaceg2o.html#a800261342e6831b847191c082623b3c0">g2o::getFileExtension</a></div><div class="ttdeci">std::string getFileExtension(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="filesys__tools_8cpp_source.html#l00060">filesys_tools.cpp:60</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a182bd2c109d50283c638d9b295f2f3d7"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2</a></div><div class="ttdeci">virtual double chi2() const =0</div><div class="ttdoc">computes the chi2 based on the cached error value, only valid after computeError has been called...</div></div>
<div class="ttc" id="group__utils_html_gad0337c8d47498031405bf9275831048c"><div class="ttname"><a href="group__utils.html#gad0337c8d47498031405bf9275831048c">g2o::formatString</a></div><div class="ttdeci">std::string formatString(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="string__tools_8cpp_source.html#l00095">string_tools.cpp:95</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_aeb6ce9f3bf7b896f58272ea0d3feb8ff"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">g2o::OptimizableGraph::Edge::robustKernel</a></div><div class="ttdeci">RobustKernel * robustKernel() const </div><div class="ttdoc">if NOT NULL, error of this edge will be robustifed with the kernel </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00383">optimizable_graph.h:383</a></div></div>
<div class="ttc" id="classg2o_1_1VertexPointXY_html"><div class="ttname"><a href="classg2o_1_1VertexPointXY.html">g2o::VertexPointXY</a></div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__point__xy_8h_source.html#l00039">vertex_point_xy.h:39</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a1e6d9f4128866982de5e11e03edd7775"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError</a></div><div class="ttdeci">virtual void computeError()=0</div></div>
<div class="ttc" id="namespaceg2o_html_aa0cecec46f211d82d5024175e81d8645"><div class="ttname"><a href="namespaceg2o.html#aa0cecec46f211d82d5024175e81d8645">g2o::getPureFilename</a></div><div class="ttdeci">std::string getPureFilename(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="filesys__tools_8cpp_source.html#l00069">filesys_tools.cpp:69</a></div></div>
<div class="ttc" id="classg2o_1_1BaseVertex_html_abb9caa0d2d00af70e95963a11ee9660a"><div class="ttname"><a href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">g2o::BaseVertex::estimate</a></div><div class="ttdeci">const EstimateType &amp; estimate() const </div><div class="ttdoc">return the current estimate of the vertex </div><div class="ttdef"><b>Definition:</b> <a href="base__vertex_8h_source.html#l00099">base_vertex.h:99</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html">g2o::OptimizableGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00349">optimizable_graph.h:349</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00324">324</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>References <a class="el" href="optimizable__graph_8cpp_source.html#l00257">g2o::OptimizableGraph::addEdge()</a>, <a class="el" href="optimizable__graph_8cpp_source.html#l00231">g2o::OptimizableGraph::addVertex()</a>, <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2()</a>, <a class="el" href="optimizable__graph_8cpp_source.html#l00315">g2o::OptimizableGraph::chi2()</a>, <a class="el" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00283">g2o::OptimizableGraph::Vertex::dimension()</a>, <a class="el" href="hyper__graph_8h_source.html#l00151">g2o::HyperGraph::Vertex::edges()</a>, <a class="el" href="hyper__graph_8h_source.html#l00230">g2o::HyperGraph::edges()</a>, <a class="el" href="tools_8cpp_source.html#l00017">g2o::findConnectedEdgesWithCostLimit()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00273">g2o::OptimizableGraph::Vertex::fixed()</a>, <a class="el" href="timeutil_8cpp_source.html#l00113">g2o::get_monotonic_time()</a>, <a class="el" href="g2o-unfold_8cpp_source.html#l00220">gnudump_edges()</a>, <a class="el" href="g2o-unfold_8cpp_source.html#l00279">gnudump_features()</a>, <a class="el" href="sparse__optimizer_8cpp_source.html#l00272">g2o::SparseOptimizer::initializeOptimization()</a>, <a class="el" href="structg2o_1_1OptimizableGraph.html#a34f4a170d58551ee9efac7a7a78fa833">g2o::OptimizableGraph::load()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00278">g2o::OptimizableGraph::Vertex::marginalized()</a>, <a class="el" href="sparse__optimizer_8cpp_source.html#l00364">g2o::SparseOptimizer::optimize()</a>, <a class="el" href="command__args_8cpp_source.html#l00198">g2o::CommandArgs::param()</a>, <a class="el" href="command__args_8cpp_source.html#l00342">g2o::CommandArgs::paramLeftOver()</a>, <a class="el" href="command__args_8cpp_source.html#l00111">g2o::CommandArgs::parseArgs()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00383">g2o::OptimizableGraph::Edge::robustKernel()</a>, <a class="el" href="structg2o_1_1OptimizableGraph.html#ac38749c4a2416dcbaf37a111996f7483">g2o::OptimizableGraph::save()</a>, <a class="el" href="sparse__optimizer_8cpp_source.html#l00583">g2o::SparseOptimizer::setForceStopFlag()</a>, <a class="el" href="optimizable__graph_8cpp_source.html#l00774">g2o::OptimizableGraph::setRenamedTypesFromString()</a>, <a class="el" href="sparse__optimizer_8h_source.html#l00219">g2o::SparseOptimizer::solver()</a>, <a class="el" href="g2o-unfold_8cpp_source.html#l00139">str2method()</a>, <a class="el" href="g2o-unfold_8cpp_source.html#l00166">str2solver()</a>, <a class="el" href="g2o-unfold_8cpp_source.html#l00083">updateDisplay()</a>, <a class="el" href="sparse__optimizer_8h_source.html#l00179">g2o::SparseOptimizer::verbose()</a>, <a class="el" href="hyper__graph_8h_source.html#l00186">g2o::HyperGraph::Edge::vertex()</a>, <a class="el" href="optimizable__graph_8h_source.html#l00496">g2o::OptimizableGraph::vertex()</a>, <a class="el" href="g2o__incremental_2protocol_8txt_source.html#l00007">vertices</a>, and <a class="el" href="hyper__graph_8h_source.html#l00225">g2o::HyperGraph::vertices()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">int</span> maxIterations;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">bool</span> verbose;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordtype">string</span> inputFilename;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordtype">string</span> gnudump;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordtype">string</span> outputfilename;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">string</span> strMethod;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">string</span> strSolver;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordtype">string</span> loadLookup;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> initialGuess;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">bool</span> marginalize;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">bool</span> listTypes;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordtype">bool</span> incremental;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordtype">bool</span> guiOut;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">double</span> lambdaInit;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordtype">int</span> updateGraphEachN = 10;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordtype">string</span> statsFile;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// command line parsing</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classg2o_1_1CommandArgs.html">CommandArgs</a> arg;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;i&quot;</span>, maxIterations, 5, <span class="stringliteral">&quot;perform n iterations&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;v&quot;</span>, verbose, <span class="keyword">false</span>, <span class="stringliteral">&quot;verbose output of the optimization process&quot;</span>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;guess&quot;</span>, initialGuess, <span class="keyword">false</span>, <span class="stringliteral">&quot;initial guess based on spanning tree&quot;</span>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;inc&quot;</span>, incremental, <span class="keyword">false</span>, <span class="stringliteral">&quot;run incremetally&quot;</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;update&quot;</span>, updateGraphEachN, 10, <span class="stringliteral">&quot;updates afert x odometry nodes, (default: 10)&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;guiOut&quot;</span>, guiOut, <span class="keyword">false</span>, <span class="stringliteral">&quot;gui output while running incrementally&quot;</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;lambdaInit&quot;</span>, lambdaInit, 0, <span class="stringliteral">&quot;user specified lambda init for levenberg&quot;</span>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;marginalize&quot;</span>, marginalize, <span class="keyword">false</span>, <span class="stringliteral">&quot;on or off&quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;method&quot;</span>, strMethod, <span class="stringliteral">&quot;Gauss&quot;</span>, <span class="stringliteral">&quot;Gauss or Levenberg&quot;</span>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;gnudump&quot;</span>, gnudump, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;dump to gnuplot data file&quot;</span>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;o&quot;</span>, outputfilename, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;output final version of the graph&quot;</span>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;solver&quot;</span>, strSolver, <span class="stringliteral">&quot;var&quot;</span>, <span class="stringliteral">&quot;specify which solver to use underneat\n\t {var, fix3_2, fix6_3, fix_7_3}&quot;</span>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;stats&quot;</span>, statsFile, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;specify a file for the statistics&quot;</span>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;listTypes&quot;</span>, listTypes, <span class="keyword">false</span>, <span class="stringliteral">&quot;list the registered types&quot;</span>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">param</a>(<span class="stringliteral">&quot;renameTypes&quot;</span>, loadLookup, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;create a lookup for loading types into other types,\n\t TAG_IN_FILE=INTERNAL_TAG_FOR_TYPE,TAG2=INTERNAL2\n\t e.g., VERTEX_CAM=VERTEX_SE3:EXPMAP&quot;</span>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#a4cc9fbc6e2ed5b5d08d3884b4a59e66e">paramLeftOver</a>(<span class="stringliteral">&quot;graph-input&quot;</span>, inputFilename, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;graph file which will be processed&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  arg.<a class="code" href="classg2o_1_1CommandArgs.html#a0ca30e0d0aa85eec4b849b21d1c25d65">parseArgs</a>(argc, argv);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (listTypes) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    OptimizableGraph::printRegisteredTypes(cout, <span class="keyword">true</span>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a> optimizer;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a99851ba4f2a507e724de43d7fe92f903">verbose</a>() = verbose;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a32afd0ab949f170297b4a59f0d9eab81">setForceStopFlag</a>(&amp;<a class="code" href="g2o-unfold_8cpp.html#aae9e4710a628ff039453f90a3c639be9">hasToStop</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  </div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  optimizer.method() = <a class="code" href="g2o-unfold_8cpp.html#a473df2f01cbbb0738fa5ef23ef644e8f">str2method</a>(strMethod);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">solver</a>() = <a class="code" href="g2o-unfold_8cpp.html#a6ba9329b3ddf15e7a134d788488a509e">str2solver</a>(strSolver, &amp;optimizer);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">if</span> (! optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">solver</a>()) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Error allocating solver&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  optimizer.userLambdaInit()=lambdaInit;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  assert (optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">solver</a>());</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  ActivePathCostFunction* guessCostFunction=0;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (initialGuess)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    guessCostFunction=<span class="keyword">new</span> ActivePathCostFunction(&amp;optimizer);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;Read input from &quot;</span> &lt;&lt; inputFilename &lt;&lt; endl;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  ifstream ifs(inputFilename.c_str());</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (!ifs) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Failed to open file&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (loadLookup.size() &gt; 0) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#afaa77a4624619237563fe94cfd7b76fd">setRenamedTypesFromString</a>(loadLookup);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (!optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#a34f4a170d58551ee9efac7a7a78fa833">load</a>(ifs)) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Error loading graph&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;Loaded &quot;</span> &lt;&lt; optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().size() &lt;&lt; <span class="stringliteral">&quot; vertices&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;Loaded &quot;</span> &lt;&lt; optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().size() &lt;&lt; <span class="stringliteral">&quot; edges&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().size() == 0) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;HyperGraph contains no vertices&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// HACK if schur, we wanna marginalize the landmarks...</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (marginalize)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Preparing Marginalization of the Landmarks ... &quot;</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordtype">int</span> maxDim = -1;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::VertexIDMap::iterator it=optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin(); it!=optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); it++){</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=<span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(it-&gt;second);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  maxDim = (max)(v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>(), maxDim);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::VertexIDMap::iterator it=optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin(); it!=optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); it++){</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=<span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(it-&gt;second);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>() != maxDim) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">//cerr &lt;&lt; &quot;m&quot;;</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a214c01f0b3cab575f3496be729f6ccb1">marginalized</a>() = <span class="keyword">true</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;done.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// sanity check</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">//HyperDijkstra d(&amp;optimizer);</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">//UniformCostFunction f;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">//d.shortestPaths(optimizer.findOneOrigin(),&amp;f);</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">//cerr &lt;&lt; PVAR(d.visited().size()) &lt;&lt; endl;</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">//assert (d.visited().size()==optimizer.vertices().size());</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span> (incremental) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">int</span> incIterations = 1;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">int</span> updateDisplayEveryN = updateGraphEachN;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordtype">int</span> maxDim = 0;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    SparseOptimizer::VertexIDMap <a class="code" href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a> = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>();</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">for</span> (SparseOptimizer::VertexIDMap::const_iterator it = vertices.begin(); it != vertices.end(); ++it) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keyword">const</span> SparseOptimizer::Vertex* v = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>SparseOptimizer::Vertex*<span class="keyword">&gt;</span>(it-&gt;second);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      maxDim = (max)(maxDim, v-&gt;dimension());</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    vector&lt;SparseOptimizer::Edge*&gt; edges;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (SparseOptimizer::EdgeSet::iterator it = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(); it != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(); ++it) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      SparseOptimizer::Edge* e = <span class="keyword">dynamic_cast&lt;</span>SparseOptimizer::Edge*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      edges.push_back(e);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().clear();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().clear();</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a99851ba4f2a507e724de43d7fe92f903">verbose</a>() = <span class="keyword">false</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// sort the edges in a way that inserting them makes sense</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    sort(edges.begin(), edges.end(), <a class="code" href="structIncrementalEdgesCompare.html">IncrementalEdgesCompare</a>());</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">double</span> cumTime = 0.;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordtype">int</span> vertexCount=0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">int</span> lastOptimizedVertexCount = 0;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordtype">int</span> lastVisUpdateVertexCount = 0;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">bool</span> addNextEdge=<span class="keyword">true</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">bool</span> freshlyOptimized=<span class="keyword">false</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">for</span> (vector&lt;SparseOptimizer::Edge*&gt;::iterator it = edges.begin(); it != edges.end(); ++it) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      SparseOptimizer::Edge* e = *it;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordtype">bool</span> optimize=<span class="keyword">false</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">if</span> (addNextEdge &amp;&amp; !optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().empty()){</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordtype">int</span> maxInGraph = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().rbegin()-&gt;first;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordtype">int</span> idMax = max(e-&gt;vertex(0)-&gt;id(), e-&gt;vertex(1)-&gt;id());</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> (maxInGraph &lt; idMax &amp;&amp; ! freshlyOptimized){</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          addNextEdge=<span class="keyword">false</span>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          optimize=<span class="keyword">true</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          addNextEdge=<span class="keyword">true</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          optimize=<span class="keyword">false</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordtype">int</span> doInit = 0;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      SparseOptimizer::Vertex* v1 = optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#a19e014e8ec2e9a6e894da8c3a8f8e50d">vertex</a>(e-&gt;vertex(0)-&gt;id());</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      SparseOptimizer::Vertex* v2 = optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#a19e014e8ec2e9a6e894da8c3a8f8e50d">vertex</a>(e-&gt;vertex(1)-&gt;id());</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">if</span> (! v1 &amp;&amp; addNextEdge) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot; adding vertex &quot; &lt;&lt; it-&gt;id1 &lt;&lt; endl;</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        SparseOptimizer::Vertex* v = <span class="keyword">dynamic_cast&lt;</span>SparseOptimizer::Vertex*<span class="keyword">&gt;</span>(e-&gt;vertex(0));</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordtype">bool</span> v1Added = optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#ae0b93774ce1dfa0dfd501c86ad4f773e">addVertex</a>(v);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        assert(v1Added);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        doInit = 2;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (v-&gt;dimension() == maxDim)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          vertexCount++;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">if</span> (! v2 &amp;&amp; addNextEdge) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot; adding vertex &quot; &lt;&lt; it-&gt;id2 &lt;&lt; endl;</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        SparseOptimizer::Vertex* v = <span class="keyword">dynamic_cast&lt;</span>SparseOptimizer::Vertex*<span class="keyword">&gt;</span>(e-&gt;vertex(1));</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordtype">bool</span> v2Added = optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#ae0b93774ce1dfa0dfd501c86ad4f773e">addVertex</a>(v);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        assert(v2Added);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        doInit = 1;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">if</span> (v-&gt;dimension() == maxDim)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          vertexCount++;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (addNextEdge){</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot; adding edge &quot; &lt;&lt; it-&gt;id1 &lt;&lt;  &quot; &quot; &lt;&lt; it-&gt;id2 &lt;&lt; &quot; &quot; &lt;&lt; it-&gt;mean &lt;&lt; endl;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (! optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070">addEdge</a>(e)) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot;Unable to add edge &quot;</span> &lt;&lt; e-&gt;vertex(0)-&gt;id() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; e-&gt;vertex(1)-&gt;id() &lt;&lt; endl;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> (doInit) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* from = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;vertex(0));</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* to   = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;vertex(1));</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          <span class="keywordflow">switch</span> (doInit){</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">case</span> 1: <span class="comment">// initialize v1 from v2</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;              <span class="keywordflow">if</span> (e-&gt;initialEstimatePossible(to, from)) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="comment">// cerr &lt;&lt; &quot;init: &quot; </span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="comment">//      &lt;&lt; to-&gt;id() &lt;&lt; &quot;(&quot; &lt;&lt; to-&gt;dimension() &lt;&lt; &quot;) -&gt; &quot; </span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <span class="comment">//      &lt;&lt; from-&gt;id() &lt;&lt; &quot;(&quot; &lt;&lt; from-&gt;dimension() &lt;&lt; &quot;) &quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                e-&gt;initialEstimate(to, from);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;              }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">case</span> 2: </div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;              <span class="keywordflow">if</span> (e-&gt;initialEstimatePossible(from, to)) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="comment">// cerr &lt;&lt; &quot;init: &quot; </span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="comment">//      &lt;&lt; from-&gt;id() &lt;&lt; &quot;(&quot; &lt;&lt; from-&gt;dimension() &lt;&lt; &quot;) -&gt; &quot; </span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="comment">//      &lt;&lt; to-&gt;id() &lt;&lt; &quot;(&quot; &lt;&lt; to-&gt;dimension() &lt;&lt; &quot;) &quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                e-&gt;initialEstimate(from, to);  </div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;              }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">default</span>: cerr &lt;&lt; <span class="stringliteral">&quot;doInit wrong value\n&quot;</span>; </div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      freshlyOptimized=<span class="keyword">false</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">if</span> (optimize){</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;Optimize&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">if</span> (vertexCount - lastOptimizedVertexCount &gt;= updateGraphEachN) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;          <span class="keywordtype">double</span> ts = <a class="code" href="namespaceg2o.html#a885a1b221d92fa77bac09573f6fdb994">get_monotonic_time</a>();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          <span class="keywordtype">int</span> currentIt=optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">optimize</a>(incIterations);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          <span class="keywordtype">double</span> dts = <a class="code" href="namespaceg2o.html#a885a1b221d92fa77bac09573f6fdb994">get_monotonic_time</a>() - ts;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;          cumTime += dts;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          <span class="comment">//optimizer-&gt;setOptimizationTime(cumTime);</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          <span class="keywordflow">if</span> (verbose) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordtype">double</span> chi2 = optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#afa9378225b271351f4425bd266f76d3a">chi2</a>();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            cerr &lt;&lt; <span class="stringliteral">&quot;nodes= &quot;</span> &lt;&lt; optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().size() &lt;&lt; <span class="stringliteral">&quot;\t edges= &quot;</span> &lt;&lt; optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().size() &lt;&lt; <span class="stringliteral">&quot;\t chi2= &quot;</span> &lt;&lt; chi2</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\t time= &quot;</span> &lt;&lt; dts &lt;&lt; <span class="stringliteral">&quot;\t iterations= &quot;</span> &lt;&lt; currentIt &lt;&lt;  <span class="stringliteral">&quot;\t cumTime= &quot;</span> &lt;&lt; cumTime &lt;&lt; endl;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          lastOptimizedVertexCount = vertexCount;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (! verbose)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        addNextEdge=<span class="keyword">true</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        freshlyOptimized=<span class="keyword">true</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        it--;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (guiOut) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (vertexCount - lastVisUpdateVertexCount &gt;= updateDisplayEveryN) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <a class="code" href="g2o-unfold_8cpp.html#a08f118beb1131a64f4d3c727135f6e23">updateDisplay</a>(cout, optimizer);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          lastVisUpdateVertexCount = vertexCount;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    } <span class="comment">// for all edges</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;inputtraj&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(), <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a>(gnudump, <span class="stringliteral">&quot;inputfeatures&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end());</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;input&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// BATCH optimization</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">//    signal(SIGINT, sigquit_handler);</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Initial chi2 = &quot;</span> &lt;&lt; optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#afa9378225b271351f4425bd266f76d3a">chi2</a>() &lt;&lt; endl;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (statsFile!=<span class="stringliteral">&quot;&quot;</span>){</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">// allocate buffer for statistics;</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      optimizer._statistics=<span class="keyword">new</span> <a class="code" href="structg2o_1_1G2OBatchStatistics.html">G2OBatchStatistics</a>[maxIterations];</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">int</span> i=optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">optimize</a>(maxIterations,guessCostFunction);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (!i){</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Cholesky failed, result might be invalid&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;regularopttraj&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(), <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a>(gnudump, <span class="stringliteral">&quot;regularoptfeatures&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end());</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;regularopt&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    </div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Computing chi2 statistics &quot;</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordtype">double</span> sumChi2=0.0;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">double</span> chi2Thres=0.0;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordtype">int</span> cnt=0;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator it = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(); it != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(); ++it) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">computeError</a>();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">if</span>(e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">robustKernel</a>())</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        e-&gt;robustifyError();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      sumChi2 += e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">chi2</a>();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      cnt++;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    chi2Thres = sumChi2/cnt * 1.4;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;  threshold=&quot;</span> &lt;&lt; chi2Thres &lt;&lt; <span class="stringliteral">&quot;  done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Searchin for high error edges .. &quot;</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> highErrorEdges;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> highErrorEdgesToFeatures;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> edgesToOptimize;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> edgesToOptimize_selected;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> edgesToOptimize_border;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  </div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator it = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(); it != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(); ++it) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">computeError</a>();</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span>(e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">robustKernel</a>())</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        e-&gt;robustifyError();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordtype">double</span> edgeChi2 = e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">chi2</a>();</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> (edgeChi2 &gt; chi2Thres) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>* from = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">vertex</a>(0));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>* to   = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">vertex</a>(1));</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">if</span> (from &amp;&amp; to) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    highErrorEdges.insert(*it);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>* tox  = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">vertex</a>(1));</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (from &amp;&amp; tox) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    highErrorEdgesToFeatures.insert(*it);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; found=&quot;</span> &lt;&lt; highErrorEdges.size() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; highErrorEdgesToFeatures.size() &lt;&lt; <span class="stringliteral">&quot; edges with high errors .. done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  </div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;hee&quot;</span>, highErrorEdges.begin(), highErrorEdges.end(), <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;heef_&quot;</span>, highErrorEdgesToFeatures.begin(), highErrorEdgesToFeatures.end(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  </div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// fix all vertices</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Fixing the whole graph &quot;</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">for</span> (std::map&lt;int, HyperGraph::Vertex*&gt;::iterator vit = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin(); </div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   vit != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); ++vit) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*vit).second);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">true</span>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">typedef</span> std::pair&lt; HyperGraph::EdgeSet, HyperGraph::EdgeSet &gt; EdgeSetPair;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keyword">typedef</span> std::vector&lt; EdgeSetPair &gt; EdgeSetPairVector;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    EdgeSetPairVector myEdgeStack;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Collecting clusters...&quot;</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">while</span> (!highErrorEdges.empty()) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      HyperGraph::EdgeSet::iterator it = highErrorEdges.begin(); </div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> selected;    </div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> border;    </div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="structInvChi2CostFunction.html">InvChi2CostFunction</a> c2cost;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* start = *it;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordtype">bool</span> edgesSelected = <span class="keyword">false</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      </div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="namespaceg2o.html#a14277de1cbb270c35abe71584fdcac7d">findConnectedEdgesWithCostLimit</a>(selected, border, start, &amp;c2cost, 2.0/chi2Thres);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">if</span> (selected.size() &gt; 10)  {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  edgesSelected = <span class="keyword">true</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; selected.size() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; border.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// high error edges and their neighbor edges will be considered for optimization</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  edgesToOptimize_selected.insert(selected.begin(), selected.end());</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  edgesToOptimize_border.insert(border.begin(), border.end());</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  edgesToOptimize.insert(selected.begin(), selected.end());</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  edgesToOptimize.insert(border.begin(), border.end());</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; selected.size() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; border.size() &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="comment">// removed edges from that cluster from the open list of high error edges</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit = selected.begin(); eit != selected.end(); ++eit) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  HyperGraph::EdgeSet::iterator removeMe = highErrorEdges.find(*eit);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">if</span> (removeMe != highErrorEdges.end()) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    highErrorEdges.erase(removeMe);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      </div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">if</span> (edgesSelected)  {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  myEdgeStack.push_back( EdgeSetPair(selected,border) );</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Found &quot;</span> &lt;&lt; myEdgeStack.size() </div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   &lt;&lt; <span class="stringliteral">&quot; clusters in sum with &quot;</span> &lt;&lt; edgesToOptimize_selected.size() &lt;&lt; <span class="stringliteral">&quot; high error edges&quot;</span> </div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; edgesToOptimize_border.size() &lt;&lt; <span class="stringliteral">&quot; border edges.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;selected&quot;</span>, edgesToOptimize_selected.begin(), edgesToOptimize_selected.end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;border&quot;</span>, edgesToOptimize_border.begin(), edgesToOptimize_border.end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;reoptimizeme&quot;</span>, edgesToOptimize.begin(), edgesToOptimize.end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Unfixing high error edges &quot;</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">for</span> (EdgeSetPairVector::iterator it = myEdgeStack.begin(); </div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   it != myEdgeStack.end(); ++it) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="comment">// un-fix bad vertices</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit = (*it).first.begin(); eit !=  (*it).first.end(); ++eit) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*eit);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* vfrom = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">vertex</a>(0));</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  vfrom-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">false</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* vto = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">vertex</a>(1));</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  vto-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">false</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// generate that for all nodes in all clusters</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Initialize optimization of subgraphs .. &quot;</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(edgesToOptimize);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (guessCostFunction==0)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      guessCostFunction=<span class="keyword">new</span> ActivePathCostFunction(&amp;optimizer);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Searching for init nodes and re-initialize subgraphs .. &quot;</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">for</span> (EdgeSetPairVector::iterator it = myEdgeStack.begin(); </div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   it != myEdgeStack.end(); ++it) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="comment">// determine good node for initialization  (one out of the borders!)</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;S&quot;</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      HyperGraph::EdgeSet::iterator eit = (*it).second.begin();</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    </div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* initNode = 0;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* vfrom = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(0));</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* vto = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(1));</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (vfrom &amp;&amp; vfrom-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>())</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  initNode = vfrom;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vto &amp;&amp; vto-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>())</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  initNode = vto;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">else</span> </div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  initNode = vfrom;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    </div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="comment">// reinitialize bad vertices</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;I&quot;</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      optimizer.initializeActiveSubsetViaMeasurements(initNode, guessCostFunction);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }      </div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot; .. done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      </div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;subsetinitialized&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  </div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// run all local optimization</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Optimize subgraphs .. &quot;</span>&lt;&lt; endl;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    optimizer.optimizeLoop(maxIterations);    </div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  </div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;subsetoptimized&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (0) <span class="comment">// no effect visible, why??</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (highErrorEdgesToFeatures.size() &gt; 0) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> edgesToBadFeatures;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">// fix all vertices</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Fixing the whole graph &quot;</span>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">for</span> (std::map&lt;int, HyperGraph::Vertex*&gt;::iterator vit = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin(); </div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;     vit != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); ++vit) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*vit).second);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">true</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot; done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Unfixing bad features&quot;</span>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit = highErrorEdgesToFeatures.begin(); </div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;     eit != highErrorEdgesToFeatures.end(); ++eit) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*eit)-&gt;vertex(1));</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">false</span>;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  edgesToBadFeatures.insert(v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(), v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end());</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      } </div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;  considering &quot;</span> &lt;&lt; edgesToBadFeatures.size() &lt;&lt; <span class="stringliteral">&quot; edges .. done&quot;</span>&lt;&lt; endl;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;featurereinit&quot;</span>, edgesToBadFeatures.begin(), edgesToBadFeatures.end(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a>(gnudump, <span class="stringliteral">&quot;featurereinitfeatures&quot;</span>, edgesToBadFeatures.begin(), edgesToBadFeatures.end());</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Initialize optimization of bad features .. &quot;</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(edgesToBadFeatures);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="comment">// run all local optimization</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Optimize bad features .. &quot;</span>&lt;&lt; endl;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      optimizer.optimizeLoop(maxIterations/2);    </div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;subgraphsfinal&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(),<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    </div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  </div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">// un-fix all vertices</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">for</span> (std::map&lt;int, HyperGraph::Vertex*&gt;::iterator vit = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin(); </div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   vit != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); ++vit) {</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>((*vit).second);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>() = <span class="keyword">false</span>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// final global optimization</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Initialize final optimization .. &quot;</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    optimizer.<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>());<span class="comment">// ALLLL</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Optimize .. &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    optimizer.optimizeLoop(maxIterations);    </div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  </div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  </div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;finaltraj&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(),<span class="keyword">true</span>,<span class="keyword">false</span>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a>(gnudump, <span class="stringliteral">&quot;finalfeatures&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end());</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (gnudump.size() &gt; 0) </div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a>(gnudump, <span class="stringliteral">&quot;final&quot;</span>, optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().begin(), optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">edges</a>().end(),<span class="keyword">true</span>,<span class="keyword">true</span>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  </div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (statsFile!=<span class="stringliteral">&quot;&quot;</span>){</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;writing stats to file \&quot;&quot;</span> &lt;&lt; statsFile &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    ofstream os(statsFile.c_str());</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;maxIterations; i++){</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      os &lt;&lt; optimizer._statistics[i] &lt;&lt; endl;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   </div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">//     // HACK write landmarks to anotherfile</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// #   if 1</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">//     bool hasLandmarks = false;</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">//     for (HyperGraph::EdgeSet::const_iterator it = optimizer.edges().begin(); it != optimizer.edges().end(); ++it) {</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">//       const VertexSE2* from = dynamic_cast&lt;const VertexSE2*&gt;((*it)-&gt;vertex(0]);</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">//       const VertexPointXY* to = dynamic_cast&lt;const VertexPointXY*&gt;((*it)-&gt;vertex(1]);</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">//       if (from &amp;&amp; to) {</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">//         hasLandmarks = true;</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">//         break;</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">//       }</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">//     }</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">//     if (hasLandmarks) {</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">//       string baseName = getPureFilename(gnudump);</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">//       string extension = getFileExtension(gnudump);</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">//       string landmarkFilename = formatString(&quot;%s_landmarks.%s&quot;, baseName.c_str(), extension.c_str());</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">//       cerr &lt;&lt; &quot;saving &quot; &lt;&lt; landmarkFilename &lt;&lt; &quot; ... &quot;;</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">//       fout.open(landmarkFilename.c_str());</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">//       for (HyperGraph::EdgeSet::const_iterator it = optimizer.edges().begin(); it != optimizer.edges().end(); ++it) {</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">//         const VertexPointXY* to = dynamic_cast&lt;const VertexPointXY*&gt;((*it)-&gt;vertex(1]);</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">//         if (to) {</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">//           const Vector2d&amp; p2 = to-&gt;estimate();</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//           fout &lt;&lt; p2[0] &lt;&lt; &quot; &quot; &lt;&lt; p2[1] &lt;&lt; endl;</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">//           fout &lt;&lt; endl;</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">//         }</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">//       }</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">//       cerr &lt;&lt; &quot;done.&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">//     }</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// #   endif</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">//}</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">if</span> (outputfilename.size() &gt; 0) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;saving &quot;</span> &lt;&lt; outputfilename &lt;&lt; <span class="stringliteral">&quot; ... &quot;</span>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    optimizer.<a class="code" href="structg2o_1_1OptimizableGraph.html#ac38749c4a2416dcbaf37a111996f7483">save</a>(outputfilename.c_str());</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;done.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div><div class="ttc" id="namespaceg2o_html_a885a1b221d92fa77bac09573f6fdb994"><div class="ttname"><a href="namespaceg2o.html#a885a1b221d92fa77bac09573f6fdb994">g2o::get_monotonic_time</a></div><div class="ttdeci">double get_monotonic_time()</div><div class="ttdef"><b>Definition:</b> <a href="timeutil_8cpp_source.html#l00113">timeutil.cpp:113</a></div></div>
<div class="ttc" id="structg2o_1_1G2OBatchStatistics_html"><div class="ttname"><a href="structg2o_1_1G2OBatchStatistics.html">g2o::G2OBatchStatistics</a></div><div class="ttdoc">statistics about the optimization </div><div class="ttdef"><b>Definition:</b> <a href="batch__stats_8h_source.html#l00040">batch_stats.h:40</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html_aaec0b2c92c5496d0f0fea8f1abdc4311"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311">g2o::HyperGraph::Edge::vertex</a></div><div class="ttdeci">const Vertex * vertex(size_t i) const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00186">hyper_graph.h:186</a></div></div>
<div class="ttc" id="classg2o_1_1CommandArgs_html"><div class="ttname"><a href="classg2o_1_1CommandArgs.html">g2o::CommandArgs</a></div><div class="ttdoc">Command line parsing of argc and argv. </div><div class="ttdef"><b>Definition:</b> <a href="command__args_8h_source.html#l00046">command_args.h:46</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a182bd2c109d50283c638d9b295f2f3d7"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2</a></div><div class="ttdeci">virtual double chi2() const =0</div><div class="ttdoc">computes the chi2 based on the cached error value, only valid after computeError has been called...</div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a098257ee6f13dbb79be07075244d9930"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">g2o::SparseOptimizer::optimize</a></div><div class="ttdeci">int optimize(int iterations, bool online=false)</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00364">sparse_optimizer.cpp:364</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_aaa505e19f70caa4f0a8fe8eccdbcd768"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">g2o::SparseOptimizer::solver</a></div><div class="ttdeci">OptimizationAlgorithm * solver()</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00219">sparse_optimizer.h:219</a></div></div>
<div class="ttc" id="structInvChi2CostFunction_html"><div class="ttname"><a href="structInvChi2CostFunction.html">InvChi2CostFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00040">g2o-unfold.cpp:40</a></div></div>
<div class="ttc" id="classg2o_1_1VertexSE2_html"><div class="ttname"><a href="classg2o_1_1VertexSE2.html">g2o::VertexSE2</a></div><div class="ttdoc">2D pose Vertex, (x,y,theta) </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__se2_8h_source.html#l00041">vertex_se2.h:41</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a3e713e7ee84eecad3876651737af6cfc"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">g2o::HyperGraph::vertices</a></div><div class="ttdeci">const VertexIDMap &amp; vertices() const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00225">hyper_graph.h:225</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a19e014e8ec2e9a6e894da8c3a8f8e50d"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a19e014e8ec2e9a6e894da8c3a8f8e50d">g2o::OptimizableGraph::vertex</a></div><div class="ttdeci">Vertex * vertex(int id)</div><div class="ttdoc">returns the vertex number id appropriately casted </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00496">optimizable_graph.h:496</a></div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_a473df2f01cbbb0738fa5ef23ef644e8f"><div class="ttname"><a href="g2o-unfold_8cpp.html#a473df2f01cbbb0738fa5ef23ef644e8f">str2method</a></div><div class="ttdeci">SparseOptimizer::Method str2method(const std::string &amp;strMethod)</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00139">g2o-unfold.cpp:139</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a5e2970e236c0dcb4eff7c205d7b6b4ae"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">g2o::HyperGraph::EdgeSet</a></div><div class="ttdeci">std::set&lt; Edge * &gt; EdgeSet</div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00135">hyper_graph.h:135</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a1037b978fec531eaf860d0037b992079"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">g2o::OptimizableGraph::Vertex::dimension</a></div><div class="ttdeci">int dimension() const </div><div class="ttdoc">dimension of the estimated state belonging to this node </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00283">optimizable_graph.h:283</a></div></div>
<div class="ttc" id="g2o__incremental_2protocol_8txt_html_a7194e46382dcf196c489c13d1be8288f"><div class="ttname"><a href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a></div><div class="ttdeci">Protocol The SLAM executable accepts such as solving the and retrieving or vertices in the explicitly state the reprensentation poses are represented by poses by VERTEX_XYZRPY In the Quaternions and other representations could be but note that it is up to the SLAM algorithm to choose the internal representation of the angles The keyword is followed by a unique vertex ID and an optional initialization of the or edges in the explicitly state the type of the constraint pose constraints are given by pose constraints by EDGE_XYZRPY The keyword is followed by a unique edge the IDs of the referenced vertices</div><div class="ttdef"><b>Definition:</b> <a href="g2o__incremental_2protocol_8txt_source.html#l00007">protocol.txt:7</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_afa9378225b271351f4425bd266f76d3a"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#afa9378225b271351f4425bd266f76d3a">g2o::OptimizableGraph::chi2</a></div><div class="ttdeci">double chi2() const </div><div class="ttdoc">returns the chi2 of the current configuration </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00315">optimizable_graph.cpp:315</a></div></div>
<div class="ttc" id="classg2o_1_1CommandArgs_html_a0ca30e0d0aa85eec4b849b21d1c25d65"><div class="ttname"><a href="classg2o_1_1CommandArgs.html#a0ca30e0d0aa85eec4b849b21d1c25d65">g2o::CommandArgs::parseArgs</a></div><div class="ttdeci">bool parseArgs(int argc, char **argv, bool exitOnError=true)</div><div class="ttdef"><b>Definition:</b> <a href="command__args_8cpp_source.html#l00111">command_args.cpp:111</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Vertex_html_a0805a5575511327262c89585f1953b8e"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">g2o::HyperGraph::Vertex::edges</a></div><div class="ttdeci">const EdgeSet &amp; edges() const </div><div class="ttdoc">returns the set of hyper-edges that are leaving/entering in this vertex </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00151">hyper_graph.h:151</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_ac38749c4a2416dcbaf37a111996f7483"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#ac38749c4a2416dcbaf37a111996f7483">g2o::OptimizableGraph::save</a></div><div class="ttdeci">virtual bool save(std::ostream &amp;os, int level=0) const </div><div class="ttdoc">save the graph to a stream. Again uses the Factory system. </div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_aeb6ce9f3bf7b896f58272ea0d3feb8ff"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#aeb6ce9f3bf7b896f58272ea0d3feb8ff">g2o::OptimizableGraph::Edge::robustKernel</a></div><div class="ttdeci">RobustKernel * robustKernel() const </div><div class="ttdoc">if NOT NULL, error of this edge will be robustifed with the kernel </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00383">optimizable_graph.h:383</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_acb3391945ed7c3f09243101d9ef0aaf0"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#acb3391945ed7c3f09243101d9ef0aaf0">g2o::HyperGraph::edges</a></div><div class="ttdeci">const EdgeSet &amp; edges() const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00230">hyper_graph.h:230</a></div></div>
<div class="ttc" id="classg2o_1_1VertexPointXY_html"><div class="ttname"><a href="classg2o_1_1VertexPointXY.html">g2o::VertexPointXY</a></div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__point__xy_8h_source.html#l00039">vertex_point_xy.h:39</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a32afd0ab949f170297b4a59f0d9eab81"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a32afd0ab949f170297b4a59f0d9eab81">g2o::SparseOptimizer::setForceStopFlag</a></div><div class="ttdeci">void setForceStopFlag(bool *flag)</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00583">sparse_optimizer.cpp:583</a></div></div>
<div class="ttc" id="classg2o_1_1CommandArgs_html_a4cc9fbc6e2ed5b5d08d3884b4a59e66e"><div class="ttname"><a href="classg2o_1_1CommandArgs.html#a4cc9fbc6e2ed5b5d08d3884b4a59e66e">g2o::CommandArgs::paramLeftOver</a></div><div class="ttdeci">void paramLeftOver(const std::string &amp;name, std::string &amp;p, const std::string &amp;defValue, const std::string &amp;desc, bool optional=false)</div><div class="ttdef"><b>Definition:</b> <a href="command__args_8cpp_source.html#l00342">command_args.cpp:342</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a1e6d9f4128866982de5e11e03edd7775"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError</a></div><div class="ttdeci">virtual void computeError()=0</div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_ae640416800bf16ebf5fd5138ecf8e797"><div class="ttname"><a href="g2o-unfold_8cpp.html#ae640416800bf16ebf5fd5138ecf8e797">gnudump_edges</a></div><div class="ttdeci">void gnudump_edges(string gnudump, string file_suffix, HyperGraph::EdgeSet::const_iterator begin, HyperGraph::EdgeSet::const_iterator end, bool dumpEdges, bool dumpFeatures)</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00220">g2o-unfold.cpp:220</a></div></div>
<div class="ttc" id="classg2o_1_1CommandArgs_html_aa724cd3a3916833f88e5eee7c36f0eec"><div class="ttname"><a href="classg2o_1_1CommandArgs.html#aa724cd3a3916833f88e5eee7c36f0eec">g2o::CommandArgs::param</a></div><div class="ttdeci">void param(const std::string &amp;name, bool &amp;p, bool defValue, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="command__args_8cpp_source.html#l00198">command_args.cpp:198</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html">g2o::HyperGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00165">hyper_graph.h:165</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a214c01f0b3cab575f3496be729f6ccb1"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a214c01f0b3cab575f3496be729f6ccb1">g2o::OptimizableGraph::Vertex::marginalized</a></div><div class="ttdeci">bool marginalized() const </div><div class="ttdoc">true =&gt; this node is marginalized out during the optimization </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00278">optimizable_graph.h:278</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html">g2o::OptimizableGraph::Vertex</a></div><div class="ttdoc">A general case Vertex for optimization. </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00107">optimizable_graph.h:107</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_afaa77a4624619237563fe94cfd7b76fd"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#afaa77a4624619237563fe94cfd7b76fd">g2o::OptimizableGraph::setRenamedTypesFromString</a></div><div class="ttdeci">void setRenamedTypesFromString(const std::string &amp;types)</div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00774">optimizable_graph.cpp:774</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a34f4a170d58551ee9efac7a7a78fa833"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a34f4a170d58551ee9efac7a7a78fa833">g2o::OptimizableGraph::load</a></div><div class="ttdeci">virtual bool load(std::istream &amp;is, bool createEdges=true)</div><div class="ttdoc">load the graph from a stream. Uses the Factory singleton for creating the vertices and edges...</div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html">g2o::SparseOptimizer</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00046">sparse_optimizer.h:46</a></div></div>
<div class="ttc" id="structIncrementalEdgesCompare_html"><div class="ttname"><a href="structIncrementalEdgesCompare.html">IncrementalEdgesCompare</a></div><div class="ttdoc">Sort Edges for inserting them sequentially. </div><div class="ttdef"><b>Definition:</b> <a href="g2o_8cpp_source.html#l00067">g2o.cpp:67</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_ac83c34e6176f0cc5315ad7401a49efb3"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">g2o::OptimizableGraph::Vertex::fixed</a></div><div class="ttdeci">bool fixed() const </div><div class="ttdoc">true =&gt; this node is fixed during the optimization </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00273">optimizable_graph.h:273</a></div></div>
<div class="ttc" id="namespaceg2o_html_a14277de1cbb270c35abe71584fdcac7d"><div class="ttname"><a href="namespaceg2o.html#a14277de1cbb270c35abe71584fdcac7d">g2o::findConnectedEdgesWithCostLimit</a></div><div class="ttdeci">void findConnectedEdgesWithCostLimit(HyperGraph::EdgeSet &amp;selected, HyperGraph::EdgeSet &amp;border, HyperGraph::Edge *start, HyperDijkstra::CostFunction *cost, double maxEdgeCost, double comparisonConditioner)</div><div class="ttdef"><b>Definition:</b> <a href="tools_8cpp_source.html#l00017">tools.cpp:17</a></div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_a08f118beb1131a64f4d3c727135f6e23"><div class="ttname"><a href="g2o-unfold_8cpp.html#a08f118beb1131a64f4d3c727135f6e23">updateDisplay</a></div><div class="ttdeci">void updateDisplay(ostream &amp;os, const SparseOptimizer &amp;optimizer)</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00083">g2o-unfold.cpp:83</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a56c0c13954ac7204cfb031c141ece9ae"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">g2o::SparseOptimizer::initializeOptimization</a></div><div class="ttdeci">virtual bool initializeOptimization(HyperGraph::EdgeSet &amp;eset)</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00272">sparse_optimizer.cpp:272</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a6831ed69fce3dba691f53302a2813070"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070">g2o::OptimizableGraph::addEdge</a></div><div class="ttdeci">virtual bool addEdge(HyperGraph::Edge *e)</div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00257">optimizable_graph.cpp:257</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_ae0b93774ce1dfa0dfd501c86ad4f773e"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#ae0b93774ce1dfa0dfd501c86ad4f773e">g2o::OptimizableGraph::addVertex</a></div><div class="ttdeci">virtual bool addVertex(HyperGraph::Vertex *v, Data *userData)</div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00231">optimizable_graph.cpp:231</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html">g2o::OptimizableGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00349">optimizable_graph.h:349</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a99851ba4f2a507e724de43d7fe92f903"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a99851ba4f2a507e724de43d7fe92f903">g2o::SparseOptimizer::verbose</a></div><div class="ttdeci">bool verbose() const </div><div class="ttdoc">verbose information during optimization </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00179">sparse_optimizer.h:179</a></div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_a6ba9329b3ddf15e7a134d788488a509e"><div class="ttname"><a href="g2o-unfold_8cpp.html#a6ba9329b3ddf15e7a134d788488a509e">str2solver</a></div><div class="ttdeci">Solver * str2solver(const std::string &amp;strSolver_, SparseOptimizer *opt)</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00166">g2o-unfold.cpp:166</a></div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_aae9e4710a628ff039453f90a3c639be9"><div class="ttname"><a href="g2o-unfold_8cpp.html#aae9e4710a628ff039453f90a3c639be9">hasToStop</a></div><div class="ttdeci">bool hasToStop</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00318">g2o-unfold.cpp:318</a></div></div>
<div class="ttc" id="g2o-unfold_8cpp_html_ab04eaf4e282d2fffaa829c9a33257723"><div class="ttname"><a href="g2o-unfold_8cpp.html#ab04eaf4e282d2fffaa829c9a33257723">gnudump_features</a></div><div class="ttdeci">void gnudump_features(string gnudump, string file_suffix, HyperGraph::EdgeSet::const_iterator begin, HyperGraph::EdgeSet::const_iterator end)</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00279">g2o-unfold.cpp:279</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b754c0c882b4e0ade5d367261594d4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sigquit_handler </td>
          <td>(</td>
          <td class="paramtype">int q &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00320">320</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                                   {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="g2o-unfold_8cpp.html#aae9e4710a628ff039453f90a3c639be9">hasToStop</a>=1;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="ttc" id="g2o-unfold_8cpp_html_aae9e4710a628ff039453f90a3c639be9"><div class="ttname"><a href="g2o-unfold_8cpp.html#aae9e4710a628ff039453f90a3c639be9">hasToStop</a></div><div class="ttdeci">bool hasToStop</div><div class="ttdef"><b>Definition:</b> <a href="g2o-unfold_8cpp_source.html#l00318">g2o-unfold.cpp:318</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a473df2f01cbbb0738fa5ef23ef644e8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SparseOptimizer::Method str2method </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strMethod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00139">139</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>Referenced by <a class="el" href="g2o-unfold_8cpp_source.html#l00324">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                            {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (strMethod==<span class="stringliteral">&quot;Gauss&quot;</span>) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;# Doing Gauss&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> SparseOptimizer::GaussNewton;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (strMethod==<span class="stringliteral">&quot;Levenberg&quot;</span>) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;# Doing Levenberg-Marquardt&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> SparseOptimizer::LevenbergMarquardt;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;# Unknown optimization method: &quot;</span> &lt;&lt; strMethod &lt;&lt; <span class="stringliteral">&quot;, setting  default to Levenberg&quot;</span>  &lt;&lt; endl;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> SparseOptimizer::LevenbergMarquardt;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ba9329b3ddf15e7a134d788488a509e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classg2o_1_1Solver.html">Solver</a>* str2solver </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strSolver_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a> *&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00166">166</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>References <a class="el" href="string__tools_8cpp_source.html#l00165">g2o::strEndsWith()</a>, and <a class="el" href="string__tools_8cpp_source.html#l00158">g2o::strStartsWith()</a>.</p>

<p>Referenced by <a class="el" href="g2o-unfold_8cpp_source.html#l00324">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">string</span> strSolver = strSolver_;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordtype">bool</span> useCholmod = <span class="keyword">false</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__utils.html#ga8cf3116202c5f68593b5cf7361265de5">strEndsWith</a>(strSolver, <span class="stringliteral">&quot;_cholmod&quot;</span>)) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    string::size_type idx = strSolver.rfind(<span class="stringliteral">&quot;_cholmod&quot;</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    strSolver = strSolver.substr(0, idx);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    useCholmod = <span class="keyword">true</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#ifndef GO_CHOLMOD_SUPPORT</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">if</span> (useCholmod) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;Error: Cholmod is not supported in this build&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (! <a class="code" href="group__utils.html#gac8988c522c5dd51d051bf2c8d084b135">strStartsWith</a>(strSolver, <span class="stringliteral">&quot;pcg&quot;</span>)) </div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;# Using &quot;</span> &lt;&lt; (useCholmod ? <span class="stringliteral">&quot;cholmod&quot;</span> : <span class="stringliteral">&quot;CSparse&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; strSolver &lt;&lt; endl;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;# Using PCG &quot;</span> &lt;&lt; strSolver&lt;&lt; endl;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (strSolver==<span class="stringliteral">&quot;var&quot;</span>) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolverX::LinearSolverType</a>* linearSolver = allocateLinearSolver&lt;BlockSolverX&gt;(useCholmod);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a8d3214273331c25cbb5d5266770e6c12">BlockSolverX</a>(opt, linearSolver);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (strSolver==<span class="stringliteral">&quot;fix3_2&quot;</span>) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolver_3_2::LinearSolverType</a>* linearSolver = allocateLinearSolver&lt;BlockSolver_3_2&gt;(useCholmod);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a4e97101bb6ac73bdb6527994a36b9819">BlockSolver_3_2</a>(opt, linearSolver);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">if</span> (strSolver==<span class="stringliteral">&quot;fix6_3&quot;</span>) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolver_6_3::LinearSolverType</a>* linearSolver = allocateLinearSolver&lt;BlockSolver_6_3&gt;(useCholmod);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a6eb2ab4064026e9c63c99b783b892cda">BlockSolver_6_3</a>(opt, linearSolver);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (strSolver==<span class="stringliteral">&quot;fix7_3&quot;</span>) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolver_7_3::LinearSolverType</a>* linearSolver = allocateLinearSolver&lt;BlockSolver_7_3&gt;(useCholmod);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a83b509c02a1333991cbb0c04d3ff7beb">BlockSolver_7_3</a>(opt, linearSolver);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (strSolver == <span class="stringliteral">&quot;pcg&quot;</span>) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolverX::LinearSolverType</a>* linearSolver = <span class="keyword">new</span> <a class="code" href="classg2o_1_1LinearSolverPCG.html">LinearSolverPCG&lt;BlockSolverX::PoseMatrixType&gt;</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a8d3214273331c25cbb5d5266770e6c12">BlockSolverX</a>(opt, linearSolver);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (strSolver == <span class="stringliteral">&quot;pcg6_3&quot;</span>) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolver_6_3::LinearSolverType</a>* linearSolver = <span class="keyword">new</span> <a class="code" href="classg2o_1_1LinearSolverPCG.html">LinearSolverPCG&lt;BlockSolver_6_3::PoseMatrixType&gt;</a>();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a6eb2ab4064026e9c63c99b783b892cda">BlockSolver_6_3</a>(opt, linearSolver);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (strSolver == <span class="stringliteral">&quot;pcg3_2&quot;</span>) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolver_3_2::LinearSolverType</a>* linearSolver = <span class="keyword">new</span> <a class="code" href="classg2o_1_1LinearSolverPCG.html">LinearSolverPCG&lt;BlockSolver_3_2::PoseMatrixType&gt;</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a4e97101bb6ac73bdb6527994a36b9819">BlockSolver_3_2</a>(opt, linearSolver);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;Unknown solver, setting the general but slower \&quot;var\&quot; &quot;</span>&lt;&lt; endl;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">BlockSolverX::LinearSolverType</a>* linearSolver = allocateLinearSolver&lt;BlockSolverX&gt;(useCholmod);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="namespaceg2o.html#a8d3214273331c25cbb5d5266770e6c12">BlockSolverX</a>(opt, linearSolver);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="namespaceg2o_html_a6eb2ab4064026e9c63c99b783b892cda"><div class="ttname"><a href="namespaceg2o.html#a6eb2ab4064026e9c63c99b783b892cda">g2o::BlockSolver_6_3</a></div><div class="ttdeci">BlockSolver&lt; BlockSolverTraits&lt; 6, 3 &gt; &gt; BlockSolver_6_3</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00181">block_solver.h:181</a></div></div>
<div class="ttc" id="classg2o_1_1LinearSolverPCG_html"><div class="ttname"><a href="classg2o_1_1LinearSolverPCG.html">g2o::LinearSolverPCG</a></div><div class="ttdoc">linear solver using PCG, pre-conditioner is block Jacobi </div><div class="ttdef"><b>Definition:</b> <a href="linear__solver__pcg_8h_source.html#l00047">linear_solver_pcg.h:47</a></div></div>
<div class="ttc" id="classg2o_1_1BlockSolver_html_a717fa8cb1dd5a212e41d8ebef67955e6"><div class="ttname"><a href="classg2o_1_1BlockSolver.html#a717fa8cb1dd5a212e41d8ebef67955e6">g2o::BlockSolver::LinearSolverType</a></div><div class="ttdeci">Traits::LinearSolverType LinearSolverType</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00110">block_solver.h:110</a></div></div>
<div class="ttc" id="namespaceg2o_html_a4e97101bb6ac73bdb6527994a36b9819"><div class="ttname"><a href="namespaceg2o.html#a4e97101bb6ac73bdb6527994a36b9819">g2o::BlockSolver_3_2</a></div><div class="ttdeci">BlockSolver&lt; BlockSolverTraits&lt; 3, 2 &gt; &gt; BlockSolver_3_2</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00185">block_solver.h:185</a></div></div>
<div class="ttc" id="group__utils_html_gac8988c522c5dd51d051bf2c8d084b135"><div class="ttname"><a href="group__utils.html#gac8988c522c5dd51d051bf2c8d084b135">g2o::strStartsWith</a></div><div class="ttdeci">bool strStartsWith(const std::string &amp;s, const std::string &amp;start)</div><div class="ttdef"><b>Definition:</b> <a href="string__tools_8cpp_source.html#l00158">string_tools.cpp:158</a></div></div>
<div class="ttc" id="namespaceg2o_html_a83b509c02a1333991cbb0c04d3ff7beb"><div class="ttname"><a href="namespaceg2o.html#a83b509c02a1333991cbb0c04d3ff7beb">g2o::BlockSolver_7_3</a></div><div class="ttdeci">BlockSolver&lt; BlockSolverTraits&lt; 7, 3 &gt; &gt; BlockSolver_7_3</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00183">block_solver.h:183</a></div></div>
<div class="ttc" id="group__utils_html_ga8cf3116202c5f68593b5cf7361265de5"><div class="ttname"><a href="group__utils.html#ga8cf3116202c5f68593b5cf7361265de5">g2o::strEndsWith</a></div><div class="ttdeci">bool strEndsWith(const std::string &amp;s, const std::string &amp;end)</div><div class="ttdef"><b>Definition:</b> <a href="string__tools_8cpp_source.html#l00165">string_tools.cpp:165</a></div></div>
<div class="ttc" id="namespaceg2o_html_a8d3214273331c25cbb5d5266770e6c12"><div class="ttname"><a href="namespaceg2o.html#a8d3214273331c25cbb5d5266770e6c12">g2o::BlockSolverX</a></div><div class="ttdeci">BlockSolver&lt; BlockSolverTraits&lt; Eigen::Dynamic, Eigen::Dynamic &gt; &gt; BlockSolverX</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00179">block_solver.h:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a08f118beb1131a64f4d3c727135f6e23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateDisplay </td>
          <td>(</td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a> &amp;&#160;</td>
          <td class="paramname"><em>optimizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00083">83</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

<p>References <a class="el" href="base__vertex_8h_source.html#l00099">g2o::BaseVertex&lt; D, T &gt;::estimate()</a>, <a class="el" href="types_2slam2d_2se2_8h_source.html#l00058">g2o::SE2::rotation()</a>, <a class="el" href="types_2slam2d_2se2_8h_source.html#l00054">g2o::SE2::translation()</a>, and <a class="el" href="hyper__graph_8h_source.html#l00225">g2o::HyperGraph::vertices()</a>.</p>

<p>Referenced by <a class="el" href="g2o-unfold_8cpp_source.html#l00324">main()</a>, and <a class="el" href="g2o__qglviewer_8h_source.html#l00045">g2o::G2oQGLViewer::updateDisplay()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// TODO edges missing</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// TODO other than 2D types missing</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">for</span> (SparseOptimizer::VertexIDMap::const_iterator it = optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().begin();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;       it != optimizer.<a class="code" href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">vertices</a>().end(); ++it) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">const</span> SparseOptimizer::Vertex* v = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>SparseOptimizer::Vertex*<span class="keyword">&gt;</span>(it-&gt;second);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    Eigen::Quaterniond quat;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    Eigen::Vector3d trans;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">bool</span> writeVertex = <span class="keyword">false</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">bool</span> writePoint  = <span class="keyword">false</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>* v2se = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexSE2.html">VertexSE2</a>*<span class="keyword">&gt;</span>(v);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (v2se) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      writeVertex = <span class="keyword">true</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      trans[0] = v2se-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#a90faebdec96378db766c35dc6f1f66b9">translation</a>()[0];</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      trans[1] = v2se-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#a90faebdec96378db766c35dc6f1f66b9">translation</a>()[1];</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      trans[2] = 0.0;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keyword">static</span> Eigen::Vector3d axis(0,0,1);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      quat = AngleAxis&lt;double&gt;(v2se-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>().<a class="code" href="classg2o_1_1SE2.html#acbf8ed1a2753da125c8c536feea1d241">rotation</a>().angle(), axis);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> <a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>* v2point = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1VertexPointXY.html">VertexPointXY</a>*<span class="keyword">&gt;</span>(v);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (v2point) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      writePoint = <span class="keyword">true</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      trans[0] = v2point-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">estimate</a>()[0];</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      trans[1] = v2point-&gt;estimate()[1];</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      trans[2] = 0.0;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (writeVertex) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      os.put(<span class="charliteral">&#39;V&#39;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordtype">int</span> <span class="keywordtype">id</span> = v-&gt;id();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;<span class="keywordtype">id</span>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.x(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.y(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.z(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;quat.w(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;quat.x(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;quat.y(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;quat.z(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (writePoint) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      os.put(<span class="charliteral">&#39;P&#39;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.x(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.y(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      os.write((<span class="keywordtype">char</span>*)&amp;trans.z(), <span class="keyword">sizeof</span>(double));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// done</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  os &lt;&lt; <span class="stringliteral">&quot;F&quot;</span> &lt;&lt; flush;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="ttc" id="classg2o_1_1VertexSE2_html"><div class="ttname"><a href="classg2o_1_1VertexSE2.html">g2o::VertexSE2</a></div><div class="ttdoc">2D pose Vertex, (x,y,theta) </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__se2_8h_source.html#l00041">vertex_se2.h:41</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a3e713e7ee84eecad3876651737af6cfc"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a3e713e7ee84eecad3876651737af6cfc">g2o::HyperGraph::vertices</a></div><div class="ttdeci">const VertexIDMap &amp; vertices() const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00225">hyper_graph.h:225</a></div></div>
<div class="ttc" id="classg2o_1_1SE2_html_acbf8ed1a2753da125c8c536feea1d241"><div class="ttname"><a href="classg2o_1_1SE2.html#acbf8ed1a2753da125c8c536feea1d241">g2o::SE2::rotation</a></div><div class="ttdeci">const Eigen::Rotation2Dd &amp; rotation() const </div><div class="ttdoc">rotational component </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2se2_8h_source.html#l00058">se2.h:58</a></div></div>
<div class="ttc" id="classg2o_1_1VertexPointXY_html"><div class="ttname"><a href="classg2o_1_1VertexPointXY.html">g2o::VertexPointXY</a></div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2vertex__point__xy_8h_source.html#l00039">vertex_point_xy.h:39</a></div></div>
<div class="ttc" id="classg2o_1_1BaseVertex_html_abb9caa0d2d00af70e95963a11ee9660a"><div class="ttname"><a href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a">g2o::BaseVertex::estimate</a></div><div class="ttdeci">const EstimateType &amp; estimate() const </div><div class="ttdoc">return the current estimate of the vertex </div><div class="ttdef"><b>Definition:</b> <a href="base__vertex_8h_source.html#l00099">base_vertex.h:99</a></div></div>
<div class="ttc" id="classg2o_1_1SE2_html_a90faebdec96378db766c35dc6f1f66b9"><div class="ttname"><a href="classg2o_1_1SE2.html#a90faebdec96378db766c35dc6f1f66b9">g2o::SE2::translation</a></div><div class="ttdeci">const Vector2D &amp; translation() const </div><div class="ttdoc">translational component </div><div class="ttdef"><b>Definition:</b> <a href="types_2slam2d_2se2_8h_source.html#l00054">se2.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aae9e4710a628ff039453f90a3c639be9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hasToStop =false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="g2o-unfold_8cpp_source.html#l00318">318</a> of file <a class="el" href="g2o-unfold_8cpp_source.html">g2o-unfold.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 18 2019 20:14:42 for g2o by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
