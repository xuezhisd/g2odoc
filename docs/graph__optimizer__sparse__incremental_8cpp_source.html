<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>g2o: /home/xuezhisd/CLionProjects/g2o/g2o/examples/interactive_slam/g2o_incremental/graph_optimizer_sparse_incremental.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">g2o
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_500bd004daf7f26e6762afdbadeff5f2.html">g2o</a></li><li class="navelem"><a class="el" href="dir_552567d00642e4a3c33c118b620e0838.html">examples</a></li><li class="navelem"><a class="el" href="dir_22e8b6e4476ef82dcab0ad990089ea74.html">interactive_slam</a></li><li class="navelem"><a class="el" href="dir_482b11b8bf67237d31ea3f2d85de48f2.html">g2o_incremental</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">graph_optimizer_sparse_incremental.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="graph__optimizer__sparse__incremental_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// g2o - General Graph Optimization</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Copyright (C) 2011 R. Kuemmerle, G. Grisetti, W. Burgard</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// g2o is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// it under the terms of the GNU General Public License as published</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// by the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// g2o is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// GNU General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="graph__optimizer__sparse__incremental_8h.html">graph_optimizer_sparse_incremental.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types__slam2d__online_8h.html">g2o/examples/interactive_slam/g2o_interactive/types_slam2d_online.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types__slam3d__online_8h.html">g2o/examples/interactive_slam/g2o_interactive/types_slam3d_online.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="block__solver_8h.html">g2o/core/block_solver.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimization__algorithm__gauss__newton_8h.html">g2o/core/optimization_algorithm_gauss_newton.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="macros_8h.html">g2o/stuff/macros.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="graph__optimizer__sparse__incremental_8cpp.html#add9185f0296b5c0af0da437ff476c7ce">   27</a></span>&#160;<span class="preprocessor">#define DIM_TO_SOLVER(p, l) BlockSolver&lt; BlockSolverTraits&lt;p, l&gt; &gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="graph__optimizer__sparse__incremental_8cpp.html#ab4c44d1c06d2284c8102f436eedc0553">   29</a></span>&#160;<span class="preprocessor">#define ALLOC_CHOLMOD(s, p, l) \</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">  if (1) { \</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">    std::cerr &lt;&lt; &quot;# Using CHOLMOD online poseDim &quot; &lt;&lt; p &lt;&lt; &quot; landMarkDim &quot; &lt;&lt; l &lt;&lt; &quot; blockordering 1&quot; &lt;&lt; std::endl; \</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">    LinearSolverCholmodOnline &lt; DIM_TO_SOLVER(p, l)::PoseMatrixType &gt;* linearSolver = new LinearSolverCholmodOnline&lt;DIM_TO_SOLVER(p, l)::PoseMatrixType&gt;(); \</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">    s = new DIM_TO_SOLVER(p, l)(linearSolver); \</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">  } else (void)0</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceEigen.html">Eigen</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceg2o.html">g2o</a> {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keyword">namespace </span>{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">struct </span>VertexBackup</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordtype">int</span> hessianIndex;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      OptimizableGraph::Vertex* vertex;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="keywordtype">double</span>* hessianData;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="namespaceg2o.html#a2a6eaf50f7bfb542915d123feee52f6a">operator&lt;</a>(<span class="keyword">const</span> VertexBackup&amp; other)<span class="keyword"> const</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span> hessianIndex &lt; other.hessianIndex;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    };</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#ab5738f3e6c6a5feea4ac8797b67205c3">   57</a></span>&#160;  SparseOptimizerIncremental::SparseOptimizerIncremental()</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    _cholmodSparse = <span class="keyword">new</span> <a class="code" href="structg2o_1_1CholmodExt.html">CholmodExt</a>();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    _cholmodFactor = 0;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    cholmod_start(&amp;_cholmodCommon);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// setup ordering strategy to not permute the matrix</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    _cholmodCommon.nmethods = 1 ;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    _cholmodCommon.method[0].ordering = CHOLMOD_NATURAL;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    _cholmodCommon.postorder = 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    _cholmodCommon.supernodal = CHOLMOD_SIMPLICIAL;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    _permutedUpdate = cholmod_allocate_triplet(1000, 1000, 1024, 0, CHOLMOD_REAL, &amp;_cholmodCommon);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    _L = 0;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    _cholmodFactor = 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    _solverInterface = 0;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    _permutedUpdateAsSparse = <span class="keyword">new</span> <a class="code" href="structg2o_1_1CholmodExt.html">CholmodExt</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#ae7e9691ba7ec7421491c24e8ea4ac37f">   77</a></span>&#160;  SparseOptimizerIncremental::~SparseOptimizerIncremental()</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">delete</span> _permutedUpdateAsSparse;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    _updateMat.clear(<span class="keyword">true</span>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">delete</span> _cholmodSparse;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (_cholmodFactor) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      cholmod_free_factor(&amp;_cholmodFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      _cholmodFactor = 0;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    cholmod_free_triplet(&amp;_permutedUpdate, &amp;_cholmodCommon);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    cholmod_finish(&amp;_cholmodCommon);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#a7c30f08300230e28004c41ae8d005f49">   90</a></span>&#160;  <span class="keywordtype">int</span> SparseOptimizerIncremental::optimize(<span class="keywordtype">int</span> iterations, <span class="keywordtype">bool</span> online)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    (void) iterations; <span class="comment">// we only do one iteration anyhow</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classg2o_1_1OptimizationAlgorithm.html">OptimizationAlgorithm</a>* solver = _algorithm;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    solver-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithm.html#af5b54ea6d40a8ab4c16d448ba02a0c80">init</a>(online);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">int</span> cjIterations=0;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">bool</span> ok=<span class="keyword">true</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (! online || batchStep) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;performing batch step&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">if</span> (! online) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        ok = _underlyingSolver-&gt;buildStructure();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (! ok) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          cerr &lt;&lt; <a class="code" href="macros_8h.html#a9c15fe1e91b07ea3280f5239f9841b67">__PRETTY_FUNCTION__</a> &lt;&lt; <span class="stringliteral">&quot;: Failure while building CCS structure&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment">// copy over the updated estimate as new linearization point</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (slamDimension == 3) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; indexMapping().size(); ++i) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          <a class="code" href="classg2o_1_1OnlineVertexSE2.html">OnlineVertexSE2</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OnlineVertexSE2.html">OnlineVertexSE2</a>*<span class="keyword">&gt;</span>(indexMapping()[i]);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          v-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#acb6e8e8f39caa04f62dd93a3dd400e06">setEstimate</a>(v-&gt;<a class="code" href="classg2o_1_1OnlineVertexSE2.html#a0c4266fa49e603025fe06a7e5ae38308">updatedEstimate</a>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slamDimension == 6) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; indexMapping().size(); ++i) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          <a class="code" href="classg2o_1_1OnlineVertexSE3.html">OnlineVertexSE3</a>* v= <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OnlineVertexSE3.html">OnlineVertexSE3</a>*<span class="keyword">&gt;</span>(indexMapping()[i]);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          v-&gt;<a class="code" href="classg2o_1_1BaseVertex.html#acb6e8e8f39caa04f62dd93a3dd400e06">setEstimate</a>(v-&gt;<a class="code" href="classg2o_1_1OnlineVertexSE3.html#a9d1b82a35bb930a7c55116871940d011">updatedEstimate</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      SparseOptimizer::computeActiveErrors();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="comment">//SparseOptimizer::linearizeSystem();</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      _underlyingSolver-&gt;buildSystem();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="comment">// mark vertices to be sorted as last</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordtype">int</span> numBlocksRequired = _ivMap.size();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">if</span> (_cmember.size() &lt; numBlocksRequired) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        _cmember.resize(2 * numBlocksRequired);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      memset(_cmember.data(), 0, numBlocksRequired * <span class="keyword">sizeof</span>(int));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span> (_ivMap.size() &gt; 100) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = _ivMap.size() - 20; i &lt; _ivMap.size(); ++i) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;          <span class="keyword">const</span> <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a>&amp; eset = _ivMap[i]-&gt;edges();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator it = eset.begin(); it != eset.end(); ++it) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v1 = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[0]);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v2 = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[1]);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">if</span> (v1-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>() &gt;= 0)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;              _cmember(v1-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>()) = 1;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">if</span> (v2-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>() &gt;= 0)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;              _cmember(v2-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>()) = 1;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">//OptimizableGraph::Vertex* lastPose = _ivMap.back();</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">//_cmember(lastPose-&gt;hessianIndex()) = 2;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      ok = _underlyingSolver-&gt;solve();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">// get the current cholesky factor along with the permutation</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      _L = _solverInterface-&gt;L();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (_perm.size() &lt; (int)_L-&gt;n)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        _perm.resize(2*_L-&gt;n);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordtype">int</span>* p = (<span class="keywordtype">int</span>*)_L-&gt;Perm;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      for (<span class="keywordtype">size_t</span> i = 0; i &lt; _L-&gt;n; ++i)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        _perm[p[i]] = i;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="comment">// update the b vector</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator it = _touchedVertices.begin(); it != _touchedVertices.end(); ++it) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordtype">int</span> iBase = v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a9559c391b2962de131045a90815a9b5a">colInHessian</a>();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af544f0050ea6e05950fd6e53931bdf61">copyB</a>(_underlyingSolver-&gt;b() + iBase);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      _solverInterface-&gt;solve(_underlyingSolver-&gt;x(), _underlyingSolver-&gt;b());</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// print statistics for the non-zeros</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">//static ofstream debugNonZeros(&quot;non-zeros.txt&quot;);</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">//debugNonZeros &lt;&lt; _solverInterface-&gt;nonZerosInL() &lt;&lt; endl;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    update(_underlyingSolver-&gt;x());</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    ++cjIterations; </div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (verbose()){</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      computeActiveErrors();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      cerr</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;nodes = &quot;</span> &lt;&lt; <a class="code" href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a>().size()</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\t edges= &quot;</span> &lt;&lt; _activeEdges.size()</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\t chi2= &quot;</span> &lt;&lt; FIXED(activeChi2())</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        &lt;&lt; endl;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (vizWithGnuplot)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      gnuplotVisualization();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (! ok)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#aba41a4996d89325155f75f919314e699">  195</a></span>&#160;  <span class="keywordtype">bool</span> SparseOptimizerIncremental::updateInitialization(<a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a>&amp; vset, <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a>&amp; eset)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (batchStep) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">return</span> SparseOptimizerOnline::updateInitialization(vset, eset);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator it = vset.begin(); it != vset.end(); ++it) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a803897f6bae25dece4d7e23330f0f9da">clearQuadraticForm</a>(); <span class="comment">// be sure that b is zero for this vertex</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// get the touched vertices</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    _touchedVertices.clear();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = eset.begin(); it != eset.end(); ++it) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v1 = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[0]);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v2 = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[1]);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (! v1-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>())</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        _touchedVertices.insert(v1);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">if</span> (! v2-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>())</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        _touchedVertices.insert(v2);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">//cerr &lt;&lt; PVAR(_touchedVertices.size()) &lt;&lt; endl;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// updating the internal structures</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    std::vector&lt;HyperGraph::Vertex*&gt; newVertices;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    newVertices.reserve(vset.size());</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    _activeVertices.reserve(_activeVertices.size() + vset.size());</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    _activeEdges.reserve(_activeEdges.size() + eset.size());</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = eset.begin(); it != eset.end(); ++it)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      _activeEdges.push_back(static_cast&lt;OptimizableGraph::Edge*&gt;(*it));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">//cerr &lt;&lt; &quot;updating internal done.&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// update the index mapping</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">size_t</span> next = _ivMap.size();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator it = vset.begin(); it != vset.end(); ++it) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=<span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">if</span> (! v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">fixed</a>()){</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (! v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a214c01f0b3cab575f3496be729f6ccb1">marginalized</a>()){</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a440f24c0108be5247f3529369aa1e53c">setHessianIndex</a>(next);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          _ivMap.push_back(v);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;          newVertices.push_back(v);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;          _activeVertices.push_back(v);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          next++;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        } </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">else</span> <span class="comment">// not supported right now</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          abort();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a440f24c0108be5247f3529369aa1e53c">setHessianIndex</a>(-1);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">//cerr &lt;&lt; &quot;updating index mapping done.&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// backup the tempindex and prepare sorting structure</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    VertexBackup* backupIdx = <span class="keyword">new</span> VertexBackup[_touchedVertices.size()];</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    VertexBackup backupIdx[_touchedVertices.size()];</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    memset(backupIdx, 0, <span class="keyword">sizeof</span>(VertexBackup) * _touchedVertices.size());</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator it = _touchedVertices.begin(); it != _touchedVertices.end(); ++it) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      backupIdx[idx].hessianIndex = v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      backupIdx[idx].vertex = v;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      backupIdx[idx].hessianData = v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a4ec536d8c82d839e507d89c7a7e368ae">hessianData</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      ++idx;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    sort(backupIdx, backupIdx + _touchedVertices.size()); <span class="comment">// sort according to the hessianIndex which is the same order as used later by the optimizer</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; idx; ++i) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      backupIdx[i].vertex-&gt;setHessianIndex(i);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">//cerr &lt;&lt; &quot;backup tempindex done.&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// building the structure of the update</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    _updateMat.clear(<span class="keyword">true</span>); <span class="comment">// get rid of the old matrix structure</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    _updateMat.rowBlockIndices().clear();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    _updateMat.colBlockIndices().clear();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    _updateMat.blockCols().clear();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// placing the current stuff in _updateMat</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    MatrixXd* lastBlock = 0;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">int</span> sizePoses = 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; idx; ++i) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v = backupIdx[i].vertex;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordtype">int</span> dim = v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      sizePoses+=dim;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      _updateMat.rowBlockIndices().push_back(sizePoses);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      _updateMat.colBlockIndices().push_back(sizePoses);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      _updateMat.blockCols().push_back(<a class="code" href="classg2o_1_1SparseBlockMatrix.html#aaa6ca1ae454ed70f62992b6401645f4e">SparseBlockMatrix&lt;MatrixXd&gt;::IntBlockMap</a>());</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordtype">int</span> ind = v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="comment">//cerr &lt;&lt; PVAR(ind) &lt;&lt; endl;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">if</span> (ind &gt;= 0) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        MatrixXd* m = _updateMat.block(ind, ind, <span class="keyword">true</span>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1008c0f7981a9fb11be3e3df5c4a9758">mapHessianMemory</a>(m-&gt;data());</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        lastBlock = m;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    lastBlock-&gt;diagonal().array() += 1e-6; <span class="comment">// HACK to get Eigen value &gt; 0</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::const_iterator it = eset.begin(); it != eset.end(); ++it) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v1 = (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*) e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[0];</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v2 = (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*) e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[1];</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordtype">int</span> ind1 = v1-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">if</span> (ind1 == -1)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordtype">int</span> ind2 = v2-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">hessianIndex</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (ind2 == -1)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordtype">bool</span> transposedBlock = ind1 &gt; ind2;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">if</span> (transposedBlock) <span class="comment">// make sure, we allocate the upper triangular block</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        swap(ind1, ind2);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      MatrixXd* m = _updateMat.block(ind1, ind2, <span class="keyword">true</span>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a3bd233fd552daa166039acf47b69a5a7">mapHessianMemory</a>(m-&gt;data(), 0, 1, transposedBlock);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// build the system into _updateMat</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = eset.begin(); it != eset.end(); ++it) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a> * e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">computeError</a>();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = eset.begin(); it != eset.end(); ++it) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = <span class="keyword">static_cast&lt;</span><a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*<span class="keyword">&gt;</span>(*it);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a0fdad5ebfb4efec9f893b57f67e0fbe1">linearizeOplus</a>(jacobianWorkspace());</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a56fbf3430ddf591e3c619bdd1b7e4499">constructQuadraticForm</a>();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// restore the original data for the vertex</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; idx; ++i) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      backupIdx[i].vertex-&gt;setHessianIndex(backupIdx[i].hessianIndex);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> (backupIdx[i].hessianData)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        backupIdx[i].vertex-&gt;mapHessianMemory(backupIdx[i].hessianData);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// update the structure of the real block matrix</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">bool</span> solverStatus = _algorithm-&gt;updateStructure(newVertices, eset);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">bool</span> updateStatus = computeCholeskyUpdate();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (! updateStatus) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Error while computing update&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    cholmod_sparse* updateAsSparseFactor = cholmod_factor_to_sparse(_cholmodFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// convert CCS update by permuting back to the permutation of L</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (updateAsSparseFactor-&gt;nzmax &gt; _permutedUpdate-&gt;nzmax) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;realloc _permutedUpdate&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      cholmod_reallocate_triplet(updateAsSparseFactor-&gt;nzmax, _permutedUpdate, &amp;_cholmodCommon);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    _permutedUpdate-&gt;nnz = 0;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    _permutedUpdate-&gt;nrow = _permutedUpdate-&gt;ncol = _L-&gt;n;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordtype">int</span>* Ap = (<span class="keywordtype">int</span>*)updateAsSparseFactor-&gt;p;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordtype">int</span>* Ai = (<span class="keywordtype">int</span>*)updateAsSparseFactor-&gt;i;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordtype">double</span>* Ax = (<span class="keywordtype">double</span>*)updateAsSparseFactor-&gt;x;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordtype">int</span>* Bj = (<span class="keywordtype">int</span>*)_permutedUpdate-&gt;j;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordtype">int</span>* Bi = (<span class="keywordtype">int</span>*)_permutedUpdate-&gt;i;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordtype">double</span>* Bx = (<span class="keywordtype">double</span>*)_permutedUpdate-&gt;x;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> c = 0; c &lt; updateAsSparseFactor-&gt;ncol; ++c) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; rbeg = Ap[c];</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; rend = Ap[c+1];</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordtype">int</span> cc = c / slamDimension;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordtype">int</span> coff = c % slamDimension;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; cbase = backupIdx[cc].vertex-&gt;colInHessian();</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; ccol = _perm(cbase + coff);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = rbeg; j &lt; rend; j++) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; r = Ai[j];</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; val = Ax[j];</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          <span class="keywordtype">int</span> rr = r / slamDimension;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;          <span class="keywordtype">int</span> roff = r % slamDimension;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; rbase = backupIdx[rr].vertex-&gt;colInHessian();</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          </div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          <span class="keywordtype">int</span> row = _perm(rbase + roff);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          <span class="keywordtype">int</span> col = ccol;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;          <span class="keywordflow">if</span> (col &gt; row) <span class="comment">// lower triangular entry</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            swap(col, row);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          Bi[_permutedUpdate-&gt;nnz] = row;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          Bj[_permutedUpdate-&gt;nnz] = col;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          Bx[_permutedUpdate-&gt;nnz] = val;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          ++_permutedUpdate-&gt;nnz;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    cholmod_free_sparse(&amp;updateAsSparseFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keyword">delete</span>[] backupIdx;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    cholmod_sparse* updatePermuted = cholmod_triplet_to_sparse(_permutedUpdate, _permutedUpdate-&gt;nnz, &amp;_cholmodCommon);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">//writeCCSMatrix(&quot;update-permuted.txt&quot;, updatePermuted-&gt;nrow, updatePermuted-&gt;ncol, (int*)updatePermuted-&gt;p, (int*)updatePermuted-&gt;i, (double*)updatePermuted-&gt;x, false);</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    _solverInterface-&gt;choleskyUpdate(updatePermuted);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    cholmod_free_sparse(&amp;updatePermuted, &amp;_cholmodCommon);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    convertTripletUpdateToSparse();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    _solverInterface-&gt;choleskyUpdate(_permutedUpdateAsSparse);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> solverStatus;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#ab84c928e95db564aae557a0a1bffca04">  402</a></span>&#160;  <span class="keywordtype">bool</span> SparseOptimizerIncremental::computeCholeskyUpdate()</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (_cholmodFactor) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      cholmod_free_factor(&amp;_cholmodFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      _cholmodFactor = 0;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">const</span> <a class="code" href="classg2o_1_1SparseBlockMatrix.html">SparseBlockMatrix&lt;MatrixXd&gt;</a>&amp; A = _updateMat;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">size_t</span> m = A.<a class="code" href="classg2o_1_1SparseBlockMatrix.html#adf18fb267e545b9036314cf9f8f10473">rows</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">size_t</span> n = A.<a class="code" href="classg2o_1_1SparseBlockMatrix.html#ab854ca59f370d93229852e32a7b49d3e">cols</a>();</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (_cholmodSparse-&gt;columnsAllocated &lt; n) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">//std::cerr &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; &quot;: reallocating columns&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      _cholmodSparse-&gt;columnsAllocated = _cholmodSparse-&gt;columnsAllocated == 0 ? n : 2 * n; <span class="comment">// pre-allocate more space if re-allocating</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">int</span>*)_cholmodSparse-&gt;p;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      _cholmodSparse-&gt;p = <span class="keyword">new</span> <span class="keywordtype">int</span>[_cholmodSparse-&gt;columnsAllocated+1];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">size_t</span> nzmax = A.<a class="code" href="classg2o_1_1SparseBlockMatrix.html#a52c11b08907dbb80ac44ad5459bc70fe">nonZeros</a>();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (_cholmodSparse-&gt;nzmax &lt; nzmax) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="comment">//std::cerr &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; &quot;: reallocating row + values&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      _cholmodSparse-&gt;nzmax = _cholmodSparse-&gt;nzmax == 0 ? nzmax : 2 * nzmax; <span class="comment">// pre-allocate more space if re-allocating</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">double</span>*)_cholmodSparse-&gt;x;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">int</span>*)_cholmodSparse-&gt;i;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      _cholmodSparse-&gt;i = <span class="keyword">new</span> <span class="keywordtype">int</span>[_cholmodSparse-&gt;nzmax];</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      _cholmodSparse-&gt;x = <span class="keyword">new</span> <span class="keywordtype">double</span>[_cholmodSparse-&gt;nzmax];</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    _cholmodSparse-&gt;ncol = n;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    _cholmodSparse-&gt;nrow = m;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    A.<a class="code" href="classg2o_1_1SparseBlockMatrix.html#a71b97c895688e06ab48eaf53c93c39ed">fillCCS</a>((<span class="keywordtype">int</span>*)_cholmodSparse-&gt;p, (<span class="keywordtype">int</span>*)_cholmodSparse-&gt;i, (<span class="keywordtype">double</span>*)_cholmodSparse-&gt;x, <span class="keyword">true</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">//writeCCSMatrix(&quot;updatesparse.txt&quot;, _cholmodSparse-&gt;nrow, _cholmodSparse-&gt;ncol, (int*)_cholmodSparse-&gt;p, (int*)_cholmodSparse-&gt;i, (double*)_cholmodSparse-&gt;x, true);</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    _cholmodFactor = cholmod_analyze(_cholmodSparse, &amp;_cholmodCommon);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    cholmod_factorize(_cholmodSparse, _cholmodFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordtype">int</span>* p = (<span class="keywordtype">int</span>*)_cholmodFactor-&gt;Perm;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    for (<span class="keywordtype">int</span> i = 0; i &lt; (int)n; ++i)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (i != p[i])</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;wrong permutation&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; p[i] &lt;&lt; endl;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (_cholmodCommon.status == CHOLMOD_NOT_POSDEF) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">//std::cerr &lt;&lt; &quot;Cholesky failure, writing debug.txt (Hessian loadable by Octave)&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">//writeCCSMatrix(&quot;debug.txt&quot;, _cholmodSparse-&gt;nrow, _cholmodSparse-&gt;ncol, (int*)_cholmodSparse-&gt;p, (int*)_cholmodSparse-&gt;i, (double*)_cholmodSparse-&gt;x, true);</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// change to the specific format we need to have a pretty normal L</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordtype">int</span> change_status = cholmod_change_factor(CHOLMOD_REAL, 1, 0, 1, 1, _cholmodFactor, &amp;_cholmodCommon);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (! change_status) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="namespaceg2o.html#aefc253809ed645f783830ca33b689c13">  459</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classg2o_1_1OptimizationAlgorithm.html">OptimizationAlgorithm</a>* <a class="code" href="namespaceg2o.html#aefc253809ed645f783830ca33b689c13">createSolver</a>(<span class="keyword">const</span> std::string&amp; solverName)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classg2o_1_1Solver.html">g2o::Solver</a>* s = 0;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (solverName == <span class="stringliteral">&quot;fix3_2_cholmod&quot;</span>) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="graph__optimizer__sparse__incremental_8cpp.html#ab4c44d1c06d2284c8102f436eedc0553">ALLOC_CHOLMOD</a>(s, 3, 2);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (solverName == <span class="stringliteral">&quot;fix6_3_cholmod&quot;</span>) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="graph__optimizer__sparse__incremental_8cpp.html#ab4c44d1c06d2284c8102f436eedc0553">ALLOC_CHOLMOD</a>(s, 6, 3);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>* gaussNewton = <span class="keyword">new</span> <a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>(s);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">return</span> gaussNewton;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#ab891145902dea9fc3cb0352e72c881bf">  474</a></span>&#160;  <span class="keywordtype">bool</span> SparseOptimizerIncremental::initSolver(<span class="keywordtype">int</span> dimension, <span class="keywordtype">int</span> batchEveryN)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">//cerr &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    slamDimension = dimension;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (dimension == 3) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      setAlgorithm(<a class="code" href="namespaceg2o.html#aefc253809ed645f783830ca33b689c13">createSolver</a>(<span class="stringliteral">&quot;fix3_2_cholmod&quot;</span>));</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>* gaussNewton = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>*<span class="keyword">&gt;</span>(solver());</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      assert(gaussNewton);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <a class="code" href="classg2o_1_1BlockSolver.html">BlockSolver&lt;BlockSolverTraits&lt;3, 2&gt;</a> &gt;* bs = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1BlockSolver.html">BlockSolver&lt;BlockSolverTraits&lt;3, 2&gt;</a> <span class="keyword">&gt;</span>*&gt;(gaussNewton-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a85473a4073c76b1a52cf9cf175e31c45">solver</a>());</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      assert(bs &amp;&amp; <span class="stringliteral">&quot;Unable to get internal block solver&quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="classg2o_1_1LinearSolverCholmodOnline.html">LinearSolverCholmodOnline&lt;Matrix3d&gt;</a>* s = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1LinearSolverCholmodOnline.html">LinearSolverCholmodOnline&lt;Matrix3d&gt;</a>*<span class="keyword">&gt;</span>(bs-&gt;<a class="code" href="classg2o_1_1BlockSolver.html#adb09637f5f87327d26928f672d6caadf">linearSolver</a>());</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      bs-&gt;<a class="code" href="classg2o_1_1Solver.html#ad35b33cee11586c8adea12cd6949f74a">setAdditionalVectorSpace</a>(300);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      bs-&gt;<a class="code" href="classg2o_1_1BlockSolver.html#a6dd8e7e7a099410005cb96ff874d8866">setSchur</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      _solverInterface = s;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      _underlyingSolver = bs;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      setAlgorithm(<a class="code" href="namespaceg2o.html#aefc253809ed645f783830ca33b689c13">createSolver</a>(<span class="stringliteral">&quot;fix6_3_cholmod&quot;</span>));</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>* gaussNewton = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">OptimizationAlgorithmGaussNewton</a>*<span class="keyword">&gt;</span>(solver());</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      assert(gaussNewton);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="classg2o_1_1BlockSolver.html">BlockSolver&lt;BlockSolverTraits&lt;6, 3&gt;</a> &gt;* bs = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1BlockSolver.html">BlockSolver&lt;BlockSolverTraits&lt;6, 3&gt;</a> <span class="keyword">&gt;</span>*&gt;(gaussNewton-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a85473a4073c76b1a52cf9cf175e31c45">solver</a>());</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      assert(bs &amp;&amp; <span class="stringliteral">&quot;Unable to get internal block solver&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="classg2o_1_1LinearSolverCholmodOnline.html">LinearSolverCholmodOnline&lt;Matrix&lt;double, 6, 6&gt;</a> &gt;* s = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1LinearSolverCholmodOnline.html">LinearSolverCholmodOnline&lt;Matrix&lt;double, 6, 6&gt;</a> <span class="keyword">&gt;</span>*&gt;(bs-&gt;<a class="code" href="classg2o_1_1BlockSolver.html#adb09637f5f87327d26928f672d6caadf">linearSolver</a>());</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      bs-&gt;<a class="code" href="classg2o_1_1Solver.html#ad35b33cee11586c8adea12cd6949f74a">setAdditionalVectorSpace</a>(600);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      bs-&gt;<a class="code" href="classg2o_1_1BlockSolver.html#a6dd8e7e7a099410005cb96ff874d8866">setSchur</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      _solverInterface = s;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      _underlyingSolver = bs;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    _solverInterface-&gt;cmember = &amp;_cmember;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    _solverInterface-&gt;batchEveryN = batchEveryN;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (! solver()) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;Error allocating solver. Allocating CHOLMOD solver failed!&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classg2o_1_1SparseOptimizerIncremental.html#a6c38861091d2de86cd3f8c98e5e8c836">  510</a></span>&#160;  <span class="keywordtype">void</span> SparseOptimizerIncremental::convertTripletUpdateToSparse()</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// re-allocate the memory</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (_tripletWorkspace.size() &lt; (int)_permutedUpdate-&gt;ncol) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      _tripletWorkspace.<a class="code" href="classg2o_1_1BlockSolver.html#a0075af2df18364cf99fd80f813b8ce4b">resize</a>(_permutedUpdate-&gt;ncol * 2);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// reallocate num-zeros</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (_permutedUpdateAsSparse-&gt;nzmax &lt; _permutedUpdate-&gt;nzmax) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      _permutedUpdateAsSparse-&gt;nzmax = _permutedUpdate-&gt;nzmax;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">int</span>*)_permutedUpdateAsSparse-&gt;i;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">double</span>*)_permutedUpdateAsSparse-&gt;x;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      _permutedUpdateAsSparse-&gt;x = <span class="keyword">new</span> <span class="keywordtype">double</span>[_permutedUpdateAsSparse-&gt;nzmax];</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      _permutedUpdateAsSparse-&gt;i = <span class="keyword">new</span> <span class="keywordtype">int</span>[_permutedUpdateAsSparse-&gt;nzmax];</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (_permutedUpdateAsSparse-&gt;columnsAllocated &lt; _permutedUpdate-&gt;ncol) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      _permutedUpdateAsSparse-&gt;columnsAllocated = 2*_permutedUpdate-&gt;ncol;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keyword">delete</span>[] (<span class="keywordtype">int</span>*) _permutedUpdateAsSparse-&gt;p;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      _permutedUpdateAsSparse-&gt;p = <span class="keyword">new</span> <span class="keywordtype">int</span>[_permutedUpdateAsSparse-&gt;columnsAllocated + 1];</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    _permutedUpdateAsSparse-&gt;ncol = _permutedUpdate-&gt;ncol;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    _permutedUpdateAsSparse-&gt;nrow = _permutedUpdate-&gt;nrow;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordtype">int</span>* w = _tripletWorkspace.data();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    memset(w, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * _permutedUpdate-&gt;ncol);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">int</span>* Ti = (<span class="keywordtype">int</span>*) _permutedUpdate-&gt;i;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span>* Tj = (<span class="keywordtype">int</span>*) _permutedUpdate-&gt;j;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">double</span>* Tx = (<span class="keywordtype">double</span>*) _permutedUpdate-&gt;x;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">int</span>* Cp = (<span class="keywordtype">int</span>*) _permutedUpdateAsSparse-&gt;p;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span>* Ci = (<span class="keywordtype">int</span>*) _permutedUpdateAsSparse-&gt;i;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">double</span>* Cx = (<span class="keywordtype">double</span>*) _permutedUpdateAsSparse-&gt;x;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0; k &lt; _permutedUpdate-&gt;nnz; ++k) <span class="comment">/* column counts */</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      w[Tj [k]]++;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">/* column pointers */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordtype">int</span> n = _permutedUpdate-&gt;ncol;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordtype">int</span> nz = 0;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; n ; i++) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      Cp[i] = nz;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      nz += w[i];</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      w[i] = Cp[i];</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    Cp[n] = nz;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    assert((<span class="keywordtype">size_t</span>)nz == _permutedUpdate-&gt;nnz);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">int</span> p;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0 ; k &lt; _permutedUpdate-&gt;nnz ; ++k) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      p = w[Tj[k]]++;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      Ci[p] = Ti[k] ;    <span class="comment">/* A(i,j) is the pth entry in C */</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      Cx[p] = Tx[k] ;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;} <span class="comment">// end namespace</span></div><div class="ttc" id="types__slam3d__online_8h_html"><div class="ttname"><a href="types__slam3d__online_8h.html">types_slam3d_online.h</a></div></div>
<div class="ttc" id="macros_8h_html_a9c15fe1e91b07ea3280f5239f9841b67"><div class="ttname"><a href="macros_8h.html#a9c15fe1e91b07ea3280f5239f9841b67">__PRETTY_FUNCTION__</a></div><div class="ttdeci">#define __PRETTY_FUNCTION__</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00089">macros.h:89</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a440f24c0108be5247f3529369aa1e53c"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a440f24c0108be5247f3529369aa1e53c">g2o::OptimizableGraph::Vertex::setHessianIndex</a></div><div class="ttdeci">void setHessianIndex(int ti)</div><div class="ttdoc">set the temporary index of the vertex in the parameter blocks </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00269">optimizable_graph.h:269</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a4ec536d8c82d839e507d89c7a7e368ae"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a4ec536d8c82d839e507d89c7a7e368ae">g2o::OptimizableGraph::Vertex::hessianData</a></div><div class="ttdeci">virtual double * hessianData()=0</div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html_ab854ca59f370d93229852e32a7b49d3e"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html#ab854ca59f370d93229852e32a7b49d3e">g2o::SparseBlockMatrix::cols</a></div><div class="ttdeci">int cols() const </div><div class="ttdoc">columns of the matrix </div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8h_source.html#l00068">sparse_block_matrix.h:68</a></div></div>
<div class="ttc" id="namespaceg2o_html_aefc253809ed645f783830ca33b689c13"><div class="ttname"><a href="namespaceg2o.html#aefc253809ed645f783830ca33b689c13">g2o::createSolver</a></div><div class="ttdeci">static OptimizationAlgorithm * createSolver(const std::string &amp;solverName)</div><div class="ttdef"><b>Definition:</b> <a href="graph__optimizer__sparse__incremental_8cpp_source.html#l00459">graph_optimizer_sparse_incremental.cpp:459</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_af544f0050ea6e05950fd6e53931bdf61"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af544f0050ea6e05950fd6e53931bdf61">g2o::OptimizableGraph::Vertex::copyB</a></div><div class="ttdeci">virtual int copyB(double *b_) const =0</div></div>
<div class="ttc" id="classg2o_1_1BlockSolver_html_a6dd8e7e7a099410005cb96ff874d8866"><div class="ttname"><a href="classg2o_1_1BlockSolver.html#a6dd8e7e7a099410005cb96ff874d8866">g2o::BlockSolver::setSchur</a></div><div class="ttdeci">virtual void setSchur(bool s)</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00132">block_solver.h:132</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a703938cdb4bb636860eed55a2489d70c"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">g2o::HyperGraph::VertexSet</a></div><div class="ttdeci">std::set&lt; Vertex * &gt; VertexSet</div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00136">hyper_graph.h:136</a></div></div>
<div class="ttc" id="classg2o_1_1OnlineVertexSE2_html"><div class="ttname"><a href="classg2o_1_1OnlineVertexSE2.html">g2o::OnlineVertexSE2</a></div><div class="ttdef"><b>Definition:</b> <a href="types__slam2d__online_8h_source.html#l00037">types_slam2d_online.h:37</a></div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html_adf18fb267e545b9036314cf9f8f10473"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html#adf18fb267e545b9036314cf9f8f10473">g2o::SparseBlockMatrix::rows</a></div><div class="ttdeci">int rows() const </div><div class="ttdoc">rows of the matrix </div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8h_source.html#l00070">sparse_block_matrix.h:70</a></div></div>
<div class="ttc" id="namespaceEigen_html"><div class="ttname"><a href="namespaceEigen.html">Eigen</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithm_html_af5b54ea6d40a8ab4c16d448ba02a0c80"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithm.html#af5b54ea6d40a8ab4c16d448ba02a0c80">g2o::OptimizationAlgorithm::init</a></div><div class="ttdeci">virtual bool init(bool online=false)=0</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div></div>
<div class="ttc" id="classg2o_1_1BlockSolver_html_a0075af2df18364cf99fd80f813b8ce4b"><div class="ttname"><a href="classg2o_1_1BlockSolver.html#a0075af2df18364cf99fd80f813b8ce4b">g2o::BlockSolver::resize</a></div><div class="ttdeci">void resize(int *blockPoseIndices, int numPoseBlocks, int *blockLandmarkIndices, int numLandmarkBlocks, int totalDim)</div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8hpp_source.html#l00062">block_solver.hpp:62</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a33009d06f2d3682a3c774182c807c48a"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a33009d06f2d3682a3c774182c807c48a">g2o::OptimizableGraph::Vertex::hessianIndex</a></div><div class="ttdeci">int hessianIndex() const </div><div class="ttdoc">temporary index of this node in the parameter vector obtained from linearization </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00266">optimizable_graph.h:266</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a0fdad5ebfb4efec9f893b57f67e0fbe1"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a0fdad5ebfb4efec9f893b57f67e0fbe1">g2o::OptimizableGraph::Edge::linearizeOplus</a></div><div class="ttdeci">virtual void linearizeOplus(JacobianWorkspace &amp;jacobianWorkspace)=0</div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html_a52c11b08907dbb80ac44ad5459bc70fe"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html#a52c11b08907dbb80ac44ad5459bc70fe">g2o::SparseBlockMatrix::nonZeros</a></div><div class="ttdeci">size_t nonZeros() const </div><div class="ttdoc">number of non-zero elements </div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8hpp_source.html#l00361">sparse_block_matrix.hpp:361</a></div></div>
<div class="ttc" id="macros_8h_html"><div class="ttname"><a href="macros_8h.html">macros.h</a></div></div>
<div class="ttc" id="structg2o_1_1CholmodExt_html"><div class="ttname"><a href="structg2o_1_1CholmodExt.html">g2o::CholmodExt</a></div><div class="ttdoc">Our extension of the CHOLMOD matrix struct. </div><div class="ttdef"><b>Definition:</b> <a href="linear__solver__cholmod_8h_source.html#l00043">linear_solver_cholmod.h:43</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithmGaussNewton_html"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithmGaussNewton.html">g2o::OptimizationAlgorithmGaussNewton</a></div><div class="ttdoc">Implementation of the Gauss Newton Algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm__gauss__newton_8h_source.html#l00038">optimization_algorithm_gauss_newton.h:38</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithmWithHessian_html_a85473a4073c76b1a52cf9cf175e31c45"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a85473a4073c76b1a52cf9cf175e31c45">g2o::OptimizationAlgorithmWithHessian::solver</a></div><div class="ttdeci">Solver * solver()</div><div class="ttdoc">return the underlying solver used to solve the linear system </div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm__with__hessian_8h_source.html#l00057">optimization_algorithm_with_hessian.h:57</a></div></div>
<div class="ttc" id="classg2o_1_1Solver_html_ad35b33cee11586c8adea12cd6949f74a"><div class="ttname"><a href="classg2o_1_1Solver.html#ad35b33cee11586c8adea12cd6949f74a">g2o::Solver::setAdditionalVectorSpace</a></div><div class="ttdeci">void setAdditionalVectorSpace(size_t s)</div><div class="ttdef"><b>Definition:</b> <a href="solver_8cpp_source.html#l00082">solver.cpp:82</a></div></div>
<div class="ttc" id="graph__optimizer__sparse__incremental_8h_html"><div class="ttname"><a href="graph__optimizer__sparse__incremental_8h.html">graph_optimizer_sparse_incremental.h</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a5e2970e236c0dcb4eff7c205d7b6b4ae"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">g2o::HyperGraph::EdgeSet</a></div><div class="ttdeci">std::set&lt; Edge * &gt; EdgeSet</div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00135">hyper_graph.h:135</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a1037b978fec531eaf860d0037b992079"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">g2o::OptimizableGraph::Vertex::dimension</a></div><div class="ttdeci">int dimension() const </div><div class="ttdoc">dimension of the estimated state belonging to this node </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00283">optimizable_graph.h:283</a></div></div>
<div class="ttc" id="g2o__incremental_2protocol_8txt_html_a7194e46382dcf196c489c13d1be8288f"><div class="ttname"><a href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a></div><div class="ttdeci">Protocol The SLAM executable accepts such as solving the and retrieving or vertices in the explicitly state the reprensentation poses are represented by poses by VERTEX_XYZRPY In the Quaternions and other representations could be but note that it is up to the SLAM algorithm to choose the internal representation of the angles The keyword is followed by a unique vertex ID and an optional initialization of the or edges in the explicitly state the type of the constraint pose constraints are given by pose constraints by EDGE_XYZRPY The keyword is followed by a unique edge the IDs of the referenced vertices</div><div class="ttdef"><b>Definition:</b> <a href="g2o__incremental_2protocol_8txt_source.html#l00007">protocol.txt:7</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html_a6410bb70a917b5407770ef1f1090b5f5"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">g2o::HyperGraph::Edge::vertices</a></div><div class="ttdeci">const VertexContainer &amp; vertices() const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00178">hyper_graph.h:178</a></div></div>
<div class="ttc" id="optimization__algorithm__gauss__newton_8h_html"><div class="ttname"><a href="optimization__algorithm__gauss__newton_8h.html">optimization_algorithm_gauss_newton.h</a></div></div>
<div class="ttc" id="namespaceg2o_html"><div class="ttname"><a href="namespaceg2o.html">g2o</a></div><div class="ttdef"><b>Definition:</b> <a href="dl__wrapper_8cpp_source.html#l00054">dl_wrapper.cpp:54</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a56fbf3430ddf591e3c619bdd1b7e4499"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a56fbf3430ddf591e3c619bdd1b7e4499">g2o::OptimizableGraph::Edge::constructQuadraticForm</a></div><div class="ttdeci">virtual void constructQuadraticForm()=0</div></div>
<div class="ttc" id="classg2o_1_1BlockSolver_html_adb09637f5f87327d26928f672d6caadf"><div class="ttname"><a href="classg2o_1_1BlockSolver.html#adb09637f5f87327d26928f672d6caadf">g2o::BlockSolver::linearSolver</a></div><div class="ttdeci">LinearSolver&lt; PoseMatrixType &gt; * linearSolver() const </div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00134">block_solver.h:134</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a9559c391b2962de131045a90815a9b5a"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a9559c391b2962de131045a90815a9b5a">g2o::OptimizableGraph::Vertex::colInHessian</a></div><div class="ttdeci">int colInHessian() const </div><div class="ttdoc">get the row of this vertex in the Hessian </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00291">optimizable_graph.h:291</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a1e6d9f4128866982de5e11e03edd7775"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a1e6d9f4128866982de5e11e03edd7775">g2o::OptimizableGraph::Edge::computeError</a></div><div class="ttdeci">virtual void computeError()=0</div></div>
<div class="ttc" id="classg2o_1_1Solver_html"><div class="ttname"><a href="classg2o_1_1Solver.html">g2o::Solver</a></div><div class="ttdoc">Generic interface for a sparse solver operating on a graph which solves one iteration of the lineariz...</div><div class="ttdef"><b>Definition:</b> <a href="solver_8h_source.html#l00044">solver.h:44</a></div></div>
<div class="ttc" id="classg2o_1_1OnlineVertexSE3_html"><div class="ttname"><a href="classg2o_1_1OnlineVertexSE3.html">g2o::OnlineVertexSE3</a></div><div class="ttdef"><b>Definition:</b> <a href="types__slam3d__online_8h_source.html#l00037">types_slam3d_online.h:37</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a1008c0f7981a9fb11be3e3df5c4a9758"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1008c0f7981a9fb11be3e3df5c4a9758">g2o::OptimizableGraph::Vertex::mapHessianMemory</a></div><div class="ttdeci">virtual void mapHessianMemory(double *d)=0</div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html_aaa6ca1ae454ed70f62992b6401645f4e"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html#aaa6ca1ae454ed70f62992b6401645f4e">g2o::SparseBlockMatrix::IntBlockMap</a></div><div class="ttdeci">std::map&lt; int, SparseMatrixBlock * &gt; IntBlockMap</div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8h_source.html#l00072">sparse_block_matrix.h:72</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a803897f6bae25dece4d7e23330f0f9da"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a803897f6bae25dece4d7e23330f0f9da">g2o::OptimizableGraph::Vertex::clearQuadraticForm</a></div><div class="ttdeci">virtual void clearQuadraticForm()=0</div></div>
<div class="ttc" id="classg2o_1_1BaseVertex_html_acb6e8e8f39caa04f62dd93a3dd400e06"><div class="ttname"><a href="classg2o_1_1BaseVertex.html#acb6e8e8f39caa04f62dd93a3dd400e06">g2o::BaseVertex::setEstimate</a></div><div class="ttdeci">void setEstimate(const EstimateType &amp;et)</div><div class="ttdoc">set the estimate for the vertex also calls updateCache() </div><div class="ttdef"><b>Definition:</b> <a href="base__vertex_8h_source.html#l00101">base_vertex.h:101</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a214c01f0b3cab575f3496be729f6ccb1"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a214c01f0b3cab575f3496be729f6ccb1">g2o::OptimizableGraph::Vertex::marginalized</a></div><div class="ttdeci">bool marginalized() const </div><div class="ttdoc">true =&gt; this node is marginalized out during the optimization </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00278">optimizable_graph.h:278</a></div></div>
<div class="ttc" id="block__solver_8h_html"><div class="ttname"><a href="block__solver_8h.html">block_solver.h</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html">g2o::OptimizableGraph::Vertex</a></div><div class="ttdoc">A general case Vertex for optimization. </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00107">optimizable_graph.h:107</a></div></div>
<div class="ttc" id="namespaceg2o_html_a2a6eaf50f7bfb542915d123feee52f6a"><div class="ttname"><a href="namespaceg2o.html#a2a6eaf50f7bfb542915d123feee52f6a">g2o::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const HyperDijkstra::AdjacencyMapEntry &amp;a, const HyperDijkstra::AdjacencyMapEntry &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8cpp_source.html#l00080">hyper_dijkstra.cpp:80</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_ac83c34e6176f0cc5315ad7401a49efb3"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac83c34e6176f0cc5315ad7401a49efb3">g2o::OptimizableGraph::Vertex::fixed</a></div><div class="ttdeci">bool fixed() const </div><div class="ttdoc">true =&gt; this node is fixed during the optimization </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00273">optimizable_graph.h:273</a></div></div>
<div class="ttc" id="classg2o_1_1OnlineVertexSE2_html_a0c4266fa49e603025fe06a7e5ae38308"><div class="ttname"><a href="classg2o_1_1OnlineVertexSE2.html#a0c4266fa49e603025fe06a7e5ae38308">g2o::OnlineVertexSE2::updatedEstimate</a></div><div class="ttdeci">VertexSE2::EstimateType updatedEstimate</div><div class="ttdef"><b>Definition:</b> <a href="types__slam2d__online_8h_source.html#l00058">types_slam2d_online.h:58</a></div></div>
<div class="ttc" id="classg2o_1_1BlockSolver_html"><div class="ttname"><a href="classg2o_1_1BlockSolver.html">g2o::BlockSolver</a></div><div class="ttdoc">Implementation of a solver operating on the blocks of the Hessian. </div><div class="ttdef"><b>Definition:</b> <a href="block__solver_8h_source.html#l00096">block_solver.h:96</a></div></div>
<div class="ttc" id="types__slam2d__online_8h_html"><div class="ttname"><a href="types__slam2d__online_8h.html">types_slam2d_online.h</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithm_html"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithm.html">g2o::OptimizationAlgorithm</a></div><div class="ttdoc">Generic interface for a non-linear solver operating on a graph. </div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm_8h_source.html#l00047">optimization_algorithm.h:47</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a3bd233fd552daa166039acf47b69a5a7"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a3bd233fd552daa166039acf47b69a5a7">g2o::OptimizableGraph::Edge::mapHessianMemory</a></div><div class="ttdeci">virtual void mapHessianMemory(double *d, int i, int j, bool rowMajor)=0</div></div>
<div class="ttc" id="classg2o_1_1OnlineVertexSE3_html_a9d1b82a35bb930a7c55116871940d011"><div class="ttname"><a href="classg2o_1_1OnlineVertexSE3.html#a9d1b82a35bb930a7c55116871940d011">g2o::OnlineVertexSE3::updatedEstimate</a></div><div class="ttdeci">VertexSE3::EstimateType updatedEstimate</div><div class="ttdef"><b>Definition:</b> <a href="types__slam3d__online_8h_source.html#l00056">types_slam3d_online.h:56</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html">g2o::OptimizableGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00349">optimizable_graph.h:349</a></div></div>
<div class="ttc" id="classg2o_1_1LinearSolverCholmodOnline_html"><div class="ttname"><a href="classg2o_1_1LinearSolverCholmodOnline.html">g2o::LinearSolverCholmodOnline</a></div><div class="ttdoc">linear solver which allows to update the cholesky factor </div><div class="ttdef"><b>Definition:</b> <a href="linear__solver__cholmod__online_8h_source.html#l00046">linear_solver_cholmod_online.h:46</a></div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html">g2o::SparseBlockMatrix</a></div><div class="ttdoc">Sparse matrix which uses blocks. </div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8h_source.html#l00061">sparse_block_matrix.h:61</a></div></div>
<div class="ttc" id="classg2o_1_1SparseBlockMatrix_html_a71b97c895688e06ab48eaf53c93c39ed"><div class="ttname"><a href="classg2o_1_1SparseBlockMatrix.html#a71b97c895688e06ab48eaf53c93c39ed">g2o::SparseBlockMatrix::fillCCS</a></div><div class="ttdeci">int fillCCS(int *Cp, int *Ci, double *Cx, bool upperTriangle=false) const </div><div class="ttdef"><b>Definition:</b> <a href="sparse__block__matrix_8hpp_source.html#l00489">sparse_block_matrix.hpp:489</a></div></div>
<div class="ttc" id="graph__optimizer__sparse__incremental_8cpp_html_ab4c44d1c06d2284c8102f436eedc0553"><div class="ttname"><a href="graph__optimizer__sparse__incremental_8cpp.html#ab4c44d1c06d2284c8102f436eedc0553">ALLOC_CHOLMOD</a></div><div class="ttdeci">#define ALLOC_CHOLMOD(s, p, l)</div><div class="ttdef"><b>Definition:</b> <a href="graph__optimizer__sparse__incremental_8cpp_source.html#l00029">graph_optimizer_sparse_incremental.cpp:29</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 18 2019 20:14:38 for g2o by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
