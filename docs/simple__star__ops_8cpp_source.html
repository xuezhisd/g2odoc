<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>g2o: /home/xuezhisd/CLionProjects/g2o/g2o/apps/g2o_hierarchical/simple_star_ops.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">g2o
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_500bd004daf7f26e6762afdbadeff5f2.html">g2o</a></li><li class="navelem"><a class="el" href="dir_49ad8e50cffd3dd57a856865903e80b6.html">apps</a></li><li class="navelem"><a class="el" href="dir_8190c222c44da217123c0f0c8a2b2bd3.html">g2o_hierarchical</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">simple_star_ops.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="simple__star__ops_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="simple__star__ops_8h.html">simple_star_ops.h</a>&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="backbone__tree__action_8h.html">backbone_tree_action.h</a>&quot;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="edge__types__cost__function_8h.html">edge_types_cost_function.h</a>&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimization__algorithm__with__hessian_8h.html">g2o/core/optimization_algorithm_with_hessian.h</a>&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;Eigen/LU&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;Eigen/Cholesky&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;Eigen/Eigenvalues&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceg2o.html">g2o</a>{</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <span class="keyword">using namespace </span><a class="code" href="namespaceEigen.html">Eigen</a>;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a1ce3206d6e07bb47be07916f46128a45">   16</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespaceg2o.html#a1ce3206d6e07bb47be07916f46128a45">activeVertexChi</a>(<span class="keyword">const</span> <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v){</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keyword">const</span> <a class="code" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a>* s = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a>*<span class="keyword">&gt;</span>(v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a6dd9a3f7fd07016cdbe791e21c6d87df">graph</a>());</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keyword">const</span> <a class="code" href="structg2o_1_1OptimizableGraph.html#a2b43e807ae6d61ef8749ca1ef7c25f62">OptimizableGraph::EdgeContainer</a>&amp; av = s-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#aef20b7dd401862d572a851349d1bc124">activeEdges</a>();</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordtype">double</span> chi = 0;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordtype">int</span> ne =0;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); it!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); it++){</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = dynamic_cast &lt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*&gt; (*it);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a68b59bf6d56a390717b82b3ae009ccf0">findActiveEdge</a>(e)!=av.end()) {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        chi +=e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">chi2</a>();</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        ne++;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;      }</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    }</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">if</span> (! ne)</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">return</span> chi/ne;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  }</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="namespaceg2o.html#af2501643e4702064869f911de98108a5">   35</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#af2501643e4702064869f911de98108a5">constructEdgeStarMap</a>(<a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; esmap, <a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars, <span class="keywordtype">bool</span> low){</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  esmap.clear();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">for</span> (StarSet::iterator it=stars.begin(); it!=stars.end(); it++){</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="structg2o_1_1Star.html">Star</a>* s = *it;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span> (low) {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = s-&gt;<a class="code" href="structg2o_1_1Star.html#aedb6be89610973ae2dc4ca17e8608360">lowLevelEdges</a>().begin();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;          it!=s-&gt;<a class="code" href="structg2o_1_1Star.html#aedb6be89610973ae2dc4ca17e8608360">lowLevelEdges</a>().end(); it++){</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e=*it;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        esmap.insert(make_pair(e,s));</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it = s-&gt;<a class="code" href="structg2o_1_1Star.html#ad778221d0dd4d8334e29f3b6e8fc4169">starEdges</a>().begin();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;          it!=s-&gt;<a class="code" href="structg2o_1_1Star.html#ad778221d0dd4d8334e29f3b6e8fc4169">starEdges</a>().end(); it++){</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e=*it;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        esmap.insert(make_pair(e,s));</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a1cf1ad10ed8be518d2e0ace44203075c">   55</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="namespaceg2o.html#a1cf1ad10ed8be518d2e0ace44203075c">vertexEdgesInStar</a>(<a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a>&amp; eset, <a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html">HyperGraph::Vertex</a>* v, <a class="code" href="structg2o_1_1Star.html">Star</a>* s, <a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; esmap){</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  eset.clear();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); it!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); it++){</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e=*it;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    EdgeStarMap::iterator eit=esmap.find(e);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (eit!=esmap.end() &amp;&amp; eit-&gt;second == s)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      eset.insert(e);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> eset.size();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a5e45718bafc9d2729b7ca6b37a4f7501">   66</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#a5e45718bafc9d2729b7ca6b37a4f7501">starsInVertex</a>(<a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars, <a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html">HyperGraph::Vertex</a>* v, <a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; esmap){</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); it!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); it++){</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e=*it;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    EdgeStarMap::iterator eit=esmap.find(e);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (eit!=esmap.end())</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      stars.insert(eit-&gt;second);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="namespaceg2o.html#af7c1225e617a0aafdf0c6f5bddbeac86">   75</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#af7c1225e617a0aafdf0c6f5bddbeac86">starsInEdge</a>(<a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars, <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e, <a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; esmap, <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a>&amp; gauge){</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>().size(); i++){</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=(<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[i];</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (gauge.find(v)==gauge.end())</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="namespaceg2o.html#a5e45718bafc9d2729b7ca6b37a4f7501">starsInVertex</a>(stars, v, esmap);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a7382ce21e3fa2585540c86ff9dd0af48">   83</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#a7382ce21e3fa2585540c86ff9dd0af48">assignHierarchicalEdges</a>(<a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars, <a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; esmap, <a class="code" href="structg2o_1_1EdgeLabeler.html">EdgeLabeler</a>* labeler, <a class="code" href="structg2o_1_1EdgeCreator.html">EdgeCreator</a>* creator, <a class="code" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a>* optimizer, <span class="keywordtype">int</span> minNumEdges, <span class="keywordtype">int</span> maxIterations){</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// now construct the hierarchical edges for all the stars</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">int</span> starNum=0;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">for</span> (StarSet::iterator it=stars.begin(); it!=stars.end(); it++){</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;STAR# &quot;</span> &lt;&lt; starNum &lt;&lt; endl;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="structg2o_1_1Star.html">Star</a>* s=*it;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    std::vector&lt;OptimizableGraph::Vertex*&gt; <a class="code" href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a>(2);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    vertices[0]= (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*) *s-&gt;<a class="code" href="structg2o_1_1Star.html#a89dcc06ac219c4e45d8bed463971661c">_gauge</a>.begin();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;eIs&quot;</span>  &lt;&lt; endl;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a> vNew =s-&gt;<a class="code" href="structg2o_1_1Star.html#a2f066793d909aebbf4547455703e7d63">lowLevelVertices</a>();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator vit=s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>.begin(); vit!=s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>.end(); vit++){</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=(<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)*vit;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      vertices[1]=v;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (v==vertices[0])</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> eInSt;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordtype">int</span> numEdges = <a class="code" href="namespaceg2o.html#a1cf1ad10ed8be518d2e0ace44203075c">vertexEdgesInStar</a>(eInSt, v, s, esmap);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classg2o_1_1Factory.html#a8a1f33e017c5ad59399cef48972578ae">Factory::instance</a>()-&gt;tag(v)==<a class="code" href="classg2o_1_1Factory.html#a8a1f33e017c5ad59399cef48972578ae">Factory::instance</a>()-&gt;tag(vertices[0]) || numEdges&gt;minNumEdges) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e=creator-&gt;<a class="code" href="structg2o_1_1EdgeCreator.html#a8f9301782318cb958a2b93972a03d190">createEdge</a>(vertices);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;creating edge&quot; &lt;&lt; e &lt;&lt; endl;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#ab3e4290bc51d03ba294f36254048b15a">setLevel</a>(1);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070">addEdge</a>(e);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.insert(e);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot;THERE&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot;FATAL, cannot create edge&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        vNew.erase(v);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">// cerr &lt;&lt; numEdges &lt;&lt; &quot; &quot;;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;r &quot; &lt;&lt;  v-&gt; id() &lt;&lt; endl;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// remove from the star all edges that are not sufficiently connected</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator it=eInSt.begin(); it!=eInSt.end(); it++){</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          <a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html">HyperGraph::Edge</a>* e=*it;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          s-&gt;<a class="code" href="structg2o_1_1Star.html#aedb6be89610973ae2dc4ca17e8608360">lowLevelEdges</a>().erase(e);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    s-&gt;<a class="code" href="structg2o_1_1Star.html#a2f066793d909aebbf4547455703e7d63">lowLevelVertices</a>()=vNew;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">//cerr &lt;&lt; endl;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    cerr &lt;&lt;  <span class="stringliteral">&quot;gauge: &quot;</span> &lt;&lt; (*s-&gt;<a class="code" href="structg2o_1_1Star.html#a89dcc06ac219c4e45d8bed463971661c">_gauge</a>.begin())-&gt;<span class="keywordtype">id</span>()</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; edges:&quot;</span> &lt;&lt; s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>.size()</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; hedges&quot;</span> &lt;&lt; s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.size() &lt;&lt; endl;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> debug = <span class="keyword">false</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (debug){</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordtype">char</span> starLowName[100];</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      sprintf(starLowName, <span class="stringliteral">&quot;star-%04d-low.g2o&quot;</span>, starNum);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      ofstream starLowStream(starLowName);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#adcf211f9c7bf3ee9dab65b130807402c">saveSubset</a>(starLowStream, s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">bool</span> labelOk=s-&gt;<a class="code" href="structg2o_1_1Star.html#a0beb41e26b574725a72d26cd9dc3b313">labelStarEdges</a>(maxIterations, labeler);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (labelOk) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> (debug) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">char</span> starHighName[100];</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        sprintf(starHighName, <span class="stringliteral">&quot;star-%04d-high.g2o&quot;</span>, starNum);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        ofstream starHighStream(starHighName);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#adcf211f9c7bf3ee9dab65b130807402c">saveSubset</a>(starHighStream, s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;FAILURE&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    starNum++;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a24d912483ecfc659b3ccdbe2c34446c0">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#a24d912483ecfc659b3ccdbe2c34446c0">computeBorder</a>(<a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars, <a class="code" href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">EdgeStarMap</a>&amp; hesmap){</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  cerr &lt;&lt; <span class="stringliteral">&quot;computing edges on the border&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">for</span> (StarSet::iterator it=stars.begin(); it!=stars.end(); it++){</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="structg2o_1_1Star.html">Star</a>* s=*it;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator iit=s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.begin(); iit!=s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.end(); iit++){</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e= (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*) *iit;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a> sset;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="namespaceg2o.html#af7c1225e617a0aafdf0c6f5bddbeac86">starsInEdge</a>(sset, e, hesmap, s-&gt;<a class="code" href="structg2o_1_1Star.html#a517fcb771c208fe07f85a2afbf03fa67">gauge</a>());</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;e: &quot; &lt;&lt; e &lt;&lt; &quot; l:&quot; &lt;&lt; e-&gt;level() &lt;&lt; &quot; sset.size()=&quot; &lt;&lt; sset.size() &lt;&lt; endl;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span> (sset.size()&gt;1){</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a3e469d90a2f1af930cd71e87151d8d17">starFrontierEdges</a>().insert(e);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="namespaceg2o.html#a002030b394634498fb6e5321a332a045">  167</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespaceg2o.html#a002030b394634498fb6e5321a332a045">computeSimpleStars</a>(<a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a>&amp; stars,</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                          <a class="code" href="classg2o_1_1SparseOptimizer.html">SparseOptimizer</a>* optimizer,</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                          <a class="code" href="structg2o_1_1EdgeLabeler.html">EdgeLabeler</a>* labeler,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                          <a class="code" href="structg2o_1_1EdgeCreator.html">EdgeCreator</a>* creator,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* gauge_,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                          std::string edgeTag,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                          std::string vertexTag,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                          <span class="keywordtype">int</span> level,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                          <span class="keywordtype">int</span> <a class="code" href="flex__scanner_8cpp.html#a0ae3dd348a36ca620e2a3416abe1337f">step</a>,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                          <span class="keywordtype">int</span> backboneIterations,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                          <span class="keywordtype">int</span> starIterations,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                          <span class="keywordtype">double</span> rejectionThreshold,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                          <span class="keywordtype">bool</span> debug){</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;preforming the tree actions&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="structg2o_1_1HyperDijkstra.html">HyperDijkstra</a> d(optimizer);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// compute a spanning tree based on the types of edges and vertices in the pool</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="structg2o_1_1EdgeTypesCostFunction.html">EdgeTypesCostFunction</a> f(edgeTag, vertexTag, level);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    d.<a class="code" href="structg2o_1_1HyperDijkstra.html#ad88b79c73c8eaa5f1afbe27b778b542e">shortestPaths</a>(gauge_,</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        &amp;f,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        std::numeric_limits&lt; double &gt;::max(),</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        1e-6,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keyword">false</span>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        std::numeric_limits&lt; double &gt;::max()/2);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="structg2o_1_1HyperDijkstra.html#a84a1d7288e1d76369442f89604c5d6de">HyperDijkstra::computeTree</a>(d.<a class="code" href="structg2o_1_1HyperDijkstra.html#ace002e09514a2eeb76a7b569f9e30f6c">adjacencyMap</a>());</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// constructs the stars on the backbone</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="structg2o_1_1BackBoneTreeAction.html">BackBoneTreeAction</a> bact(optimizer, vertexTag, level, step);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    bact.init();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;free edges size &quot;</span> &lt;&lt; bact.freeEdges().size() &lt;&lt; endl;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// perform breadth-first visit of the visit tree and create the stars on the backbone</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    d.<a class="code" href="structg2o_1_1HyperDijkstra.html#aa73ae495f10f81823b16f26715f32c58">visitAdjacencyMap</a>(d.<a class="code" href="structg2o_1_1HyperDijkstra.html#ace002e09514a2eeb76a7b569f9e30f6c">adjacencyMap</a>(),&amp;bact,<span class="keyword">true</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    stars.clear();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">for</span> (VertexStarMultimap::iterator it=bact.vertexStarMultiMap().begin();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        it!=bact.vertexStarMultiMap().end(); it++){</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      stars.insert(it-&gt;second);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;stars.size: &quot;</span> &lt;&lt; stars.size() &lt;&lt; endl;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    cerr &lt;&lt; <span class="stringliteral">&quot;size: &quot;</span> &lt;&lt; bact.vertexStarMultiMap().size() &lt;&lt; endl;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//  for each star</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">//    for all vertices in the backbone, select all edges leading/leaving from that vertex</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">//    that are contained in freeEdges.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">//      mark the corresponding &quot;open&quot; vertices and add them to a multimap (vertex-&gt;star)</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">//    select a gauge in the backbone</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">//    push all vertices on the backbone</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">//    compute an initial guess on the backbone</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">//    one round of optimization backbone</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">//    lock all vertices in the backbone</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">//    push all &quot;open&quot; vertices</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//    for each open vertex,</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">//      compute an initial guess given the backbone</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//      do some rounds of solveDirect</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">//      if (fail)</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">//        - remove the vertex and the edges in that vertex from the star</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">//   - make the structures consistent</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">//    pop all &quot;open&quot; vertices</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">//    pop all &quot;vertices&quot; in the backbone</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">//    unfix the vertices in the backbone</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">int</span> starNum=0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">for</span> (StarSet::iterator it=stars.begin(); it!=stars.end(); it++){</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="structg2o_1_1Star.html">Star</a>* s =*it;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a> backboneVertices = s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> backboneEdges = s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">if</span> (backboneEdges.empty())</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="comment">// cerr &lt;&lt; &quot;optimizing backbone&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="comment">// one of these  should be the gauge, to be simple we select the fisrt one in the backbone</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">OptimizableGraph::VertexSet</a> gauge;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      gauge.insert(*backboneVertices.begin());</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a517fcb771c208fe07f85a2afbf03fa67">gauge</a>()=gauge;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a08833d6f9ae487f5608f6113f3635b6b">push</a>(backboneVertices);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">setFixed</a>(gauge,<span class="keyword">true</span>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(backboneEdges);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a59db9f16934d3b9f7a52511f0be1bb07">computeInitialGuess</a>();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">optimize</a>(backboneIterations);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">setFixed</a>(backboneVertices, <span class="keyword">true</span>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="comment">// cerr &lt;&lt; &quot;assignind edges.vertices not in bbone&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> otherEdges;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a> otherVertices;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      std::multimap&lt;HyperGraph::Vertex*, HyperGraph::Edge*&gt; vemap;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator bit=backboneVertices.begin(); bit!=backboneVertices.end(); bit++){</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html">HyperGraph::Vertex</a>* v=*bit;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); eit!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); eit++){</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*) *eit;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          HyperGraph::EdgeSet::iterator feit=bact.freeEdges().find(e);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <span class="keywordflow">if</span> (feit!=bact.freeEdges().end()){ <span class="comment">// edge is admissible</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            otherEdges.insert(e);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            bact.freeEdges().erase(feit);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>().size(); i++){</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* ve= (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)e-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">vertices</a>()[i];</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              <span class="keywordflow">if</span> (backboneVertices.find(ve)==backboneVertices.end()){</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                otherVertices.insert(ve);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                vemap.insert(make_pair(ve,e));</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;              }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">// RAINER TODO maybe need a better solution than dynamic casting here??</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html">OptimizationAlgorithmWithHessian</a>* solverWithHessian = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html">OptimizationAlgorithmWithHessian</a>*<span class="keyword">&gt;</span>(s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">solver</a>());</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">if</span> (solverWithHessian) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a08833d6f9ae487f5608f6113f3635b6b">push</a>(otherVertices);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;optimizing vertices out of bbone&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;push&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;init&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(otherEdges);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;guess&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a59db9f16934d3b9f7a52511f0be1bb07">computeInitialGuess</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;solver init&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">solver</a>()-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithm.html#af5b54ea6d40a8ab4c16d448ba02a0c80">init</a>();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;structure&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (!solverWithHessian-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html#aa84732c8554039ba0152693837bd1b4a">buildLinearStructure</a>())</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          cerr &lt;&lt; <span class="stringliteral">&quot;FATAL: failure while building linear structure&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;errors&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a09572668aa85b75a5bebf7b66401ce8f">computeActiveErrors</a>();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;system&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        solverWithHessian-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a3ceacb3dddb14121b03e0afe7b7cfeaa">updateLinearSystem</a>();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;directSolove&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;FATAL: hierarchical thing cannot be used with a solver that does not support the system structure construction&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="comment">// // then optimize the vertices one at a time to check if a solution is good</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator vit=otherVertices.begin(); vit!=otherVertices.end(); vit++){</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=(<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)(*vit);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a61c4e7b7a7a61e1f287069a8cb01004f">solveDirect</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot; &quot; &lt;&lt; d;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// if  a solution is found, add a vertex and all the edges in</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="comment">//othervertices that are pointing to that edge to the star</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>.insert(v);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); eit!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); eit++){</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*) *eit;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <span class="keywordflow">if</span> (otherEdges.find(e)!=otherEdges.end())</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>.insert(e);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">//cerr &lt;&lt;  endl;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// relax the backbone and optimize it all</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// cerr &lt;&lt; &quot;relax bbone&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">setFixed</a>(backboneVertices, <span class="keyword">false</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;fox gauge bbone&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">setFixed</a>(s-&gt;<a class="code" href="structg2o_1_1Star.html#a517fcb771c208fe07f85a2afbf03fa67">gauge</a>(),<span class="keyword">true</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;opt init&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">initializeOptimization</a>(s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      optimizer-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a09572668aa85b75a5bebf7b66401ce8f">computeActiveErrors</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordtype">double</span> initialChi = optimizer-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#add4d83073e22dbb48b66b953d0185ffa">activeChi2</a>();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordtype">int</span> starOptResult = s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">optimize</a>(starIterations);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">//cerr &lt;&lt; starOptResult &lt;&lt; &quot;(&quot; &lt;&lt; starIterations &lt;&lt; &quot;)  &quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordtype">double</span> finalchi=-1.;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      cerr &lt;&lt;  <span class="stringliteral">&quot;computing star: &quot;</span> &lt;&lt; starNum &lt;&lt; endl;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordtype">int</span> vKept=0, vDropped=0;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">if</span> (!starIterations || starOptResult &gt; 0  ){</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        optimizer-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a09572668aa85b75a5bebf7b66401ce8f">computeActiveErrors</a>();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        finalchi = optimizer-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#add4d83073e22dbb48b66b953d0185ffa">activeChi2</a>();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#if 1</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a09572668aa85b75a5bebf7b66401ce8f">computeActiveErrors</a>();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">// cerr &lt;&lt; &quot;system&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        solverWithHessian-&gt;<a class="code" href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a3ceacb3dddb14121b03e0afe7b7cfeaa">updateLinearSystem</a>();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">HyperGraph::EdgeSet</a> prunedStarEdges = backboneEdges;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">HyperGraph::VertexSet</a> prunedStarVertices = backboneVertices;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator vit=otherVertices.begin(); vit!=otherVertices.end(); vit++){</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          <span class="comment">//discard the vertices whose error is too big</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=(<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)(*vit);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;          MatrixXd h(v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>(), v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>());</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>(); i++){</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">dimension</a>(); j++)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;              h(i,j)=v-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af46fa4f0baa4c87e29b137f24e713acb">hessian</a>(i,j);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          EigenSolver&lt;Eigen::MatrixXd&gt; esolver;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          esolver.compute(h);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          VectorXcd ev= esolver.eigenvalues();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          <span class="keywordtype">double</span> emin = std::numeric_limits&lt;double&gt;::max();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;          <span class="keywordtype">double</span> emax = -std::numeric_limits&lt;double&gt;::max();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ev.size(); i++){</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            emin = ev(i).real()&gt;emin ? emin : ev(i).real();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            emax = ev(i).real()&lt;emax ? emax : ev(i).real();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          <span class="keywordtype">double</span> d=emin/emax;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          <span class="comment">// cerr &lt;&lt; &quot; &quot; &lt;&lt; d;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          <span class="keywordflow">if</span> (d&gt;rejectionThreshold){</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="comment">// if  a solution is found, add a vertex and all the edges in</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="comment">//othervertices that are pointing to that edge to the star</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            prunedStarVertices.insert(v);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">for</span> (HyperGraph::EdgeSet::iterator eit=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().begin(); eit!=v-&gt;<a class="code" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">edges</a>().end(); eit++){</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;              <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e = (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>*) *eit;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;              <span class="keywordflow">if</span> (otherEdges.find(e)!=otherEdges.end())</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                prunedStarEdges.insert(e);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="comment">//cerr &lt;&lt; &quot;K( &quot; &lt;&lt; v-&gt;id() &lt;&lt; &quot;,&quot; &lt;&lt; d &lt;&lt; &quot;)&quot; ;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            vKept ++;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            vDropped++;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="comment">//cerr &lt;&lt; &quot;R( &quot; &lt;&lt; v-&gt;id() &lt;&lt; &quot;,&quot; &lt;&lt; d &lt;&lt; &quot;)&quot; ;</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;          }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>=prunedStarEdges;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>=prunedStarVertices;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">//cerr &lt;&lt; &quot;addHedges&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">//now add to the star the hierarchical edges</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        std::vector&lt;OptimizableGraph::Vertex*&gt; <a class="code" href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a>(2);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        vertices[0]= (<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*) *s-&gt;<a class="code" href="structg2o_1_1Star.html#a89dcc06ac219c4e45d8bed463971661c">_gauge</a>.begin();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">for</span> (HyperGraph::VertexSet::iterator vit=s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>.begin(); vit!=s-&gt;<a class="code" href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">_lowLevelVertices</a>.end(); vit++){</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>* v=(<a class="code" href="classg2o_1_1OptimizableGraph_1_1Vertex.html">OptimizableGraph::Vertex</a>*)*vit;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;          vertices[1]=v;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          <span class="keywordflow">if</span> (v==vertices[0])</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html">OptimizableGraph::Edge</a>* e=creator-&gt;<a class="code" href="structg2o_1_1EdgeCreator.html#a8f9301782318cb958a2b93972a03d190">createEdge</a>(vertices);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="comment">//rr &lt;&lt; &quot;creating edge&quot; &lt;&lt; e &lt;&lt;  Factory::instance()-&gt;tag(vertices[0]) &lt;&lt; &quot;-&gt;&quot; &lt;&lt;  Factory::instance()-&gt;tag(v) &lt;endl;</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            e-&gt;<a class="code" href="classg2o_1_1OptimizableGraph_1_1Edge.html#ab3e4290bc51d03ba294f36254048b15a">setLevel</a>(level+1);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070">addEdge</a>(e);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.insert(e);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            cerr &lt;&lt; <span class="stringliteral">&quot;HERE&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            cerr &lt;&lt; <span class="stringliteral">&quot;FATAL, cannot create edge&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot; gauge: &quot;</span> &lt;&lt; (*s-&gt;<a class="code" href="structg2o_1_1Star.html#a89dcc06ac219c4e45d8bed463971661c">_gauge</a>.begin())-&gt;<span class="keywordtype">id</span>()</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; kept: &quot;</span> &lt;&lt; vKept</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; dropped: &quot;</span> &lt;&lt; vDropped</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; edges:&quot;</span> &lt;&lt; s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>.size()</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; hedges&quot;</span> &lt;&lt; s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>.size()</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; initial chi &quot;</span> &lt;&lt; initialChi</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; final chi &quot;</span> &lt;&lt; finalchi &lt;&lt; endl;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">if</span> (debug) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordtype">char</span> starLowName[100];</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        sprintf(starLowName, <span class="stringliteral">&quot;star-%04d-low.g2o&quot;</span>, starNum);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        ofstream starLowStream(starLowName);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#adcf211f9c7bf3ee9dab65b130807402c">saveSubset</a>(starLowStream, s-&gt;<a class="code" href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">_lowLevelEdges</a>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordtype">bool</span> labelOk=<span class="keyword">false</span>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">if</span> (!starIterations || starOptResult &gt; 0)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        labelOk = s-&gt;<a class="code" href="structg2o_1_1Star.html#a0beb41e26b574725a72d26cd9dc3b313">labelStarEdges</a>(0, labeler);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (labelOk) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">if</span> (debug) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <span class="keywordtype">char</span> starHighName[100];</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          sprintf(starHighName, <span class="stringliteral">&quot;star-%04d-high.g2o&quot;</span>, starNum);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          ofstream starHighStream(starHighName);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          optimizer-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#adcf211f9c7bf3ee9dab65b130807402c">saveSubset</a>(starHighStream, s-&gt;<a class="code" href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">_starEdges</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;FAILURE: &quot;</span> &lt;&lt; starOptResult &lt;&lt; endl;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      starNum++;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">//label each hierarchical edge</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a57dbbb584122c6cfa292bb79d8fcd7ad">pop</a>(otherVertices);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="classg2o_1_1SparseOptimizer.html#a57dbbb584122c6cfa292bb79d8fcd7ad">pop</a>(backboneVertices);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      s-&gt;<a class="code" href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">optimizer</a>()-&gt;<a class="code" href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">setFixed</a>(s-&gt;<a class="code" href="structg2o_1_1Star.html#a517fcb771c208fe07f85a2afbf03fa67">gauge</a>(),<span class="keyword">false</span>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">StarSet</a> stars2;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// now erase the stars that have 0 edges. They r useless</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">for</span> (StarSet::iterator it=stars.begin(); it!=stars.end(); it++){</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="structg2o_1_1Star.html">Star</a>* s=*it;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structg2o_1_1Star.html#aedb6be89610973ae2dc4ca17e8608360">lowLevelEdges</a>().size()==0) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keyword">delete</span> s;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        stars2.insert(s);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    stars=stars2;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div><div class="ttc" id="edge__types__cost__function_8h_html"><div class="ttname"><a href="edge__types__cost__function_8h.html">edge_types_cost_function.h</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a59db9f16934d3b9f7a52511f0be1bb07"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a59db9f16934d3b9f7a52511f0be1bb07">g2o::SparseOptimizer::computeInitialGuess</a></div><div class="ttdeci">virtual void computeInitialGuess()</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00308">sparse_optimizer.cpp:308</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a6dd9a3f7fd07016cdbe791e21c6d87df"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a6dd9a3f7fd07016cdbe791e21c6d87df">g2o::OptimizableGraph::Vertex::graph</a></div><div class="ttdeci">const OptimizableGraph * graph() const </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00293">optimizable_graph.h:293</a></div></div>
<div class="ttc" id="classg2o_1_1Factory_html_a8a1f33e017c5ad59399cef48972578ae"><div class="ttname"><a href="classg2o_1_1Factory.html#a8a1f33e017c5ad59399cef48972578ae">g2o::Factory::instance</a></div><div class="ttdeci">static Factory * instance()</div><div class="ttdoc">return the instance </div><div class="ttdef"><b>Definition:</b> <a href="factory_8cpp_source.html#l00061">factory.cpp:61</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a0c8bd0561e94c1cf6d95b037e99ce9d2"><div class="ttname"><a href="structg2o_1_1Star.html#a0c8bd0561e94c1cf6d95b037e99ce9d2">g2o::Star::optimizer</a></div><div class="ttdeci">SparseOptimizer * optimizer()</div><div class="ttdoc">returns the optimizer </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00041">star.h:41</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a61c4e7b7a7a61e1f287069a8cb01004f"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a61c4e7b7a7a61e1f287069a8cb01004f">g2o::OptimizableGraph::Vertex::solveDirect</a></div><div class="ttdeci">virtual double solveDirect(double lambda=0)=0</div></div>
<div class="ttc" id="structg2o_1_1Star_html_ae5f05e46ef78d77b8b624cc726f40b86"><div class="ttname"><a href="structg2o_1_1Star.html#ae5f05e46ef78d77b8b624cc726f40b86">g2o::Star::_lowLevelEdges</a></div><div class="ttdeci">HyperGraph::EdgeSet _lowLevelEdges</div><div class="ttdoc">edges in the lower level </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00058">star.h:58</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_af46fa4f0baa4c87e29b137f24e713acb"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af46fa4f0baa4c87e29b137f24e713acb">g2o::OptimizableGraph::Vertex::hessian</a></div><div class="ttdeci">virtual const double &amp; hessian(int i, int j) const =0</div><div class="ttdoc">get the element from the hessian matrix </div></div>
<div class="ttc" id="backbone__tree__action_8h_html"><div class="ttname"><a href="backbone__tree__action_8h.html">backbone_tree_action.h</a></div></div>
<div class="ttc" id="namespaceg2o_html_a7382ce21e3fa2585540c86ff9dd0af48"><div class="ttname"><a href="namespaceg2o.html#a7382ce21e3fa2585540c86ff9dd0af48">g2o::assignHierarchicalEdges</a></div><div class="ttdeci">void assignHierarchicalEdges(StarSet &amp;stars, EdgeStarMap &amp;esmap, EdgeLabeler *labeler, EdgeCreator *creator, SparseOptimizer *optimizer, int minNumEdges, int maxIterations)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00083">simple_star_ops.cpp:83</a></div></div>
<div class="ttc" id="namespaceg2o_html_a1ce3206d6e07bb47be07916f46128a45"><div class="ttname"><a href="namespaceg2o.html#a1ce3206d6e07bb47be07916f46128a45">g2o::activeVertexChi</a></div><div class="ttdeci">double activeVertexChi(const OptimizableGraph::Vertex *v)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00016">simple_star_ops.cpp:16</a></div></div>
<div class="ttc" id="structg2o_1_1HyperDijkstra_html_a84a1d7288e1d76369442f89604c5d6de"><div class="ttname"><a href="structg2o_1_1HyperDijkstra.html#a84a1d7288e1d76369442f89604c5d6de">g2o::HyperDijkstra::computeTree</a></div><div class="ttdeci">static void computeTree(AdjacencyMap &amp;amap)</div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8cpp_source.html#l00157">hyper_dijkstra.cpp:157</a></div></div>
<div class="ttc" id="namespaceg2o_html_af2501643e4702064869f911de98108a5"><div class="ttname"><a href="namespaceg2o.html#af2501643e4702064869f911de98108a5">g2o::constructEdgeStarMap</a></div><div class="ttdeci">void constructEdgeStarMap(EdgeStarMap &amp;esmap, StarSet &amp;stars, bool low)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00035">simple_star_ops.cpp:35</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a703938cdb4bb636860eed55a2489d70c"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a703938cdb4bb636860eed55a2489d70c">g2o::HyperGraph::VertexSet</a></div><div class="ttdeci">std::set&lt; Vertex * &gt; VertexSet</div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00136">hyper_graph.h:136</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a3e469d90a2f1af930cd71e87151d8d17"><div class="ttname"><a href="structg2o_1_1Star.html#a3e469d90a2f1af930cd71e87151d8d17">g2o::Star::starFrontierEdges</a></div><div class="ttdeci">HyperGraph::EdgeSet &amp; starFrontierEdges()</div><div class="ttdoc">edges in the high level that lead to some node owned by a different star </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00047">star.h:47</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a57dbbb584122c6cfa292bb79d8fcd7ad"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a57dbbb584122c6cfa292bb79d8fcd7ad">g2o::SparseOptimizer::pop</a></div><div class="ttdeci">void pop(SparseOptimizer::VertexContainer &amp;vlist)</div><div class="ttdoc">pop (restore) the estimate a subset of the variables from the stack </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00531">sparse_optimizer.cpp:531</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_a182bd2c109d50283c638d9b295f2f3d7"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#a182bd2c109d50283c638d9b295f2f3d7">g2o::OptimizableGraph::Edge::chi2</a></div><div class="ttdeci">virtual double chi2() const =0</div><div class="ttdoc">computes the chi2 based on the cached error value, only valid after computeError has been called...</div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a098257ee6f13dbb79be07075244d9930"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930">g2o::SparseOptimizer::optimize</a></div><div class="ttdeci">int optimize(int iterations, bool online=false)</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00364">sparse_optimizer.cpp:364</a></div></div>
<div class="ttc" id="namespaceEigen_html"><div class="ttname"><a href="namespaceEigen.html">Eigen</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_ad778221d0dd4d8334e29f3b6e8fc4169"><div class="ttname"><a href="structg2o_1_1Star.html#ad778221d0dd4d8334e29f3b6e8fc4169">g2o::Star::starEdges</a></div><div class="ttdeci">HyperGraph::EdgeSet &amp; starEdges()</div><div class="ttdoc">high level edge set </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00045">star.h:45</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithm_html_af5b54ea6d40a8ab4c16d448ba02a0c80"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithm.html#af5b54ea6d40a8ab4c16d448ba02a0c80">g2o::OptimizationAlgorithm::init</a></div><div class="ttdeci">virtual bool init(bool online=false)=0</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_aaa505e19f70caa4f0a8fe8eccdbcd768"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#aaa505e19f70caa4f0a8fe8eccdbcd768">g2o::SparseOptimizer::solver</a></div><div class="ttdeci">OptimizationAlgorithm * solver()</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00219">sparse_optimizer.h:219</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_aef20b7dd401862d572a851349d1bc124"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#aef20b7dd401862d572a851349d1bc124">g2o::SparseOptimizer::activeEdges</a></div><div class="ttdeci">const EdgeContainer &amp; activeEdges() const </div><div class="ttdoc">the edges active in the current optimization </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00196">sparse_optimizer.h:196</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a09572668aa85b75a5bebf7b66401ce8f"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a09572668aa85b75a5bebf7b66401ce8f">g2o::SparseOptimizer::computeActiveErrors</a></div><div class="ttdeci">void computeActiveErrors()</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00061">sparse_optimizer.cpp:61</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithmWithHessian_html"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithmWithHessian.html">g2o::OptimizationAlgorithmWithHessian</a></div><div class="ttdoc">Base for solvers operating on the approximated Hessian, e.g., Gauss-Newton, Levenberg. </div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm__with__hessian_8h_source.html#l00040">optimization_algorithm_with_hessian.h:40</a></div></div>
<div class="ttc" id="namespaceg2o_html_a24d912483ecfc659b3ccdbe2c34446c0"><div class="ttname"><a href="namespaceg2o.html#a24d912483ecfc659b3ccdbe2c34446c0">g2o::computeBorder</a></div><div class="ttdeci">void computeBorder(StarSet &amp;stars, EdgeStarMap &amp;hesmap)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00150">simple_star_ops.cpp:150</a></div></div>
<div class="ttc" id="simple__star__ops_8h_html"><div class="ttname"><a href="simple__star__ops_8h.html">simple_star_ops.h</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a0beb41e26b574725a72d26cd9dc3b313"><div class="ttname"><a href="structg2o_1_1Star.html#a0beb41e26b574725a72d26cd9dc3b313">g2o::Star::labelStarEdges</a></div><div class="ttdeci">bool labelStarEdges(int iterations, EdgeLabeler *labeler)</div><div class="ttdef"><b>Definition:</b> <a href="star_8cpp_source.html#l00009">star.cpp:9</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a2b43e807ae6d61ef8749ca1ef7c25f62"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a2b43e807ae6d61ef8749ca1ef7c25f62">g2o::OptimizableGraph::EdgeContainer</a></div><div class="ttdeci">std::vector&lt; OptimizableGraph::Edge * &gt; EdgeContainer</div><div class="ttdoc">vector container for edges </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00102">optimizable_graph.h:102</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_html_a5e2970e236c0dcb4eff7c205d7b6b4ae"><div class="ttname"><a href="classg2o_1_1HyperGraph.html#a5e2970e236c0dcb4eff7c205d7b6b4ae">g2o::HyperGraph::EdgeSet</a></div><div class="ttdeci">std::set&lt; Edge * &gt; EdgeSet</div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00135">hyper_graph.h:135</a></div></div>
<div class="ttc" id="structg2o_1_1HyperDijkstra_html_aa73ae495f10f81823b16f26715f32c58"><div class="ttname"><a href="structg2o_1_1HyperDijkstra.html#aa73ae495f10f81823b16f26715f32c58">g2o::HyperDijkstra::visitAdjacencyMap</a></div><div class="ttdeci">static void visitAdjacencyMap(AdjacencyMap &amp;amap, TreeAction *action, bool useDistance=false)</div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8cpp_source.html#l00179">hyper_dijkstra.cpp:179</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html_a1037b978fec531eaf860d0037b992079"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079">g2o::OptimizableGraph::Vertex::dimension</a></div><div class="ttdeci">int dimension() const </div><div class="ttdoc">dimension of the estimated state belonging to this node </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00283">optimizable_graph.h:283</a></div></div>
<div class="ttc" id="g2o__incremental_2protocol_8txt_html_a7194e46382dcf196c489c13d1be8288f"><div class="ttname"><a href="g2o__incremental_2protocol_8txt.html#a7194e46382dcf196c489c13d1be8288f">vertices</a></div><div class="ttdeci">Protocol The SLAM executable accepts such as solving the and retrieving or vertices in the explicitly state the reprensentation poses are represented by poses by VERTEX_XYZRPY In the Quaternions and other representations could be but note that it is up to the SLAM algorithm to choose the internal representation of the angles The keyword is followed by a unique vertex ID and an optional initialization of the or edges in the explicitly state the type of the constraint pose constraints are given by pose constraints by EDGE_XYZRPY The keyword is followed by a unique edge the IDs of the referenced vertices</div><div class="ttdef"><b>Definition:</b> <a href="g2o__incremental_2protocol_8txt_source.html#l00007">protocol.txt:7</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a99346b2aa46d321271b7fc92e0cc65aa"><div class="ttname"><a href="structg2o_1_1Star.html#a99346b2aa46d321271b7fc92e0cc65aa">g2o::Star::_starEdges</a></div><div class="ttdeci">HyperGraph::EdgeSet _starEdges</div><div class="ttdoc">edges in the star </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00060">star.h:60</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html_a6410bb70a917b5407770ef1f1090b5f5"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5">g2o::HyperGraph::Edge::vertices</a></div><div class="ttdeci">const VertexContainer &amp; vertices() const </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00178">hyper_graph.h:178</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Vertex_html_a0805a5575511327262c89585f1953b8e"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e">g2o::HyperGraph::Vertex::edges</a></div><div class="ttdeci">const EdgeSet &amp; edges() const </div><div class="ttdoc">returns the set of hyper-edges that are leaving/entering in this vertex </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00151">hyper_graph.h:151</a></div></div>
<div class="ttc" id="namespaceg2o_html"><div class="ttname"><a href="namespaceg2o.html">g2o</a></div><div class="ttdef"><b>Definition:</b> <a href="dl__wrapper_8cpp_source.html#l00054">dl_wrapper.cpp:54</a></div></div>
<div class="ttc" id="structg2o_1_1HyperDijkstra_html_ad88b79c73c8eaa5f1afbe27b778b542e"><div class="ttname"><a href="structg2o_1_1HyperDijkstra.html#ad88b79c73c8eaa5f1afbe27b778b542e">g2o::HyperDijkstra::shortestPaths</a></div><div class="ttdeci">void shortestPaths(HyperGraph::Vertex *v, HyperDijkstra::CostFunction *cost, double maxDistance=std::numeric_limits&lt; double &gt;::max(), double comparisonConditioner=1e-3, bool directed=false, double maxEdgeCost=std::numeric_limits&lt; double &gt;::max())</div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8cpp_source.html#l00149">hyper_dijkstra.cpp:149</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html"><div class="ttname"><a href="structg2o_1_1Star.html">g2o::Star</a></div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00026">star.h:26</a></div></div>
<div class="ttc" id="optimization__algorithm__with__hessian_8h_html"><div class="ttname"><a href="optimization__algorithm__with__hessian_8h.html">optimization_algorithm_with_hessian.h</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_adcf211f9c7bf3ee9dab65b130807402c"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#adcf211f9c7bf3ee9dab65b130807402c">g2o::OptimizableGraph::saveSubset</a></div><div class="ttdeci">bool saveSubset(std::ostream &amp;os, HyperGraph::VertexSet &amp;vset, int level=0)</div><div class="ttdoc">save a subgraph to a stream. Again uses the Factory system. </div></div>
<div class="ttc" id="structg2o_1_1BackBoneTreeAction_html"><div class="ttname"><a href="structg2o_1_1BackBoneTreeAction.html">g2o::BackBoneTreeAction</a></div><div class="ttdef"><b>Definition:</b> <a href="backbone__tree__action_8h_source.html#l00020">backbone_tree_action.h:20</a></div></div>
<div class="ttc" id="structg2o_1_1EdgeCreator_html"><div class="ttname"><a href="structg2o_1_1EdgeCreator.html">g2o::EdgeCreator</a></div><div class="ttdef"><b>Definition:</b> <a href="edge__creator_8h_source.html#l00020">edge_creator.h:20</a></div></div>
<div class="ttc" id="structg2o_1_1HyperDijkstra_html"><div class="ttname"><a href="structg2o_1_1HyperDijkstra.html">g2o::HyperDijkstra</a></div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8h_source.html#l00038">hyper_dijkstra.h:38</a></div></div>
<div class="ttc" id="structg2o_1_1EdgeLabeler_html"><div class="ttname"><a href="structg2o_1_1EdgeLabeler.html">g2o::EdgeLabeler</a></div><div class="ttdef"><b>Definition:</b> <a href="edge__labeler_8h_source.html#l00020">edge_labeler.h:20</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a386aeb93665c21887154459711f4657f"><div class="ttname"><a href="structg2o_1_1Star.html#a386aeb93665c21887154459711f4657f">g2o::Star::_lowLevelVertices</a></div><div class="ttdeci">HyperGraph::VertexSet _lowLevelVertices</div><div class="ttdoc">vertices that are fixed (center of the star) </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00066">star.h:66</a></div></div>
<div class="ttc" id="namespaceg2o_html_a95be18ef7ca9364c4200caa087a0f638"><div class="ttname"><a href="namespaceg2o.html#a95be18ef7ca9364c4200caa087a0f638">g2o::StarSet</a></div><div class="ttdeci">std::set&lt; Star * &gt; StarSet</div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00071">star.h:71</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a89dcc06ac219c4e45d8bed463971661c"><div class="ttname"><a href="structg2o_1_1Star.html#a89dcc06ac219c4e45d8bed463971661c">g2o::Star::_gauge</a></div><div class="ttdeci">HyperGraph::VertexSet _gauge</div><div class="ttdoc">vertices that are fixed (center of the star) </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00064">star.h:64</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Edge.html">g2o::HyperGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00165">hyper_graph.h:165</a></div></div>
<div class="ttc" id="namespaceg2o_html_af7c1225e617a0aafdf0c6f5bddbeac86"><div class="ttname"><a href="namespaceg2o.html#af7c1225e617a0aafdf0c6f5bddbeac86">g2o::starsInEdge</a></div><div class="ttdeci">void starsInEdge(StarSet &amp;stars, HyperGraph::Edge *e, EdgeStarMap &amp;esmap, HyperGraph::VertexSet &amp;gauge)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00075">simple_star_ops.cpp:75</a></div></div>
<div class="ttc" id="structg2o_1_1EdgeCreator_html_a8f9301782318cb958a2b93972a03d190"><div class="ttname"><a href="structg2o_1_1EdgeCreator.html#a8f9301782318cb958a2b93972a03d190">g2o::EdgeCreator::createEdge</a></div><div class="ttdeci">OptimizableGraph::Edge * createEdge(std::vector&lt; OptimizableGraph::Vertex * &gt; &amp;vertices)</div><div class="ttdef"><b>Definition:</b> <a href="edge__creator_8cpp_source.html#l00031">edge_creator.cpp:31</a></div></div>
<div class="ttc" id="namespaceg2o_html_adf77b220017eb1ea28f3df5913bd3bbf"><div class="ttname"><a href="namespaceg2o.html#adf77b220017eb1ea28f3df5913bd3bbf">g2o::EdgeStarMap</a></div><div class="ttdeci">std::map&lt; HyperGraph::Edge *, Star * &gt; EdgeStarMap</div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00072">star.h:72</a></div></div>
<div class="ttc" id="namespaceg2o_html_a5e45718bafc9d2729b7ca6b37a4f7501"><div class="ttname"><a href="namespaceg2o.html#a5e45718bafc9d2729b7ca6b37a4f7501">g2o::starsInVertex</a></div><div class="ttdeci">void starsInVertex(StarSet &amp;stars, HyperGraph::Vertex *v, EdgeStarMap &amp;esmap)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00066">simple_star_ops.cpp:66</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithmWithHessian_html_aa84732c8554039ba0152693837bd1b4a"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithmWithHessian.html#aa84732c8554039ba0152693837bd1b4a">g2o::OptimizationAlgorithmWithHessian::buildLinearStructure</a></div><div class="ttdeci">virtual bool buildLinearStructure()</div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm__with__hessian_8cpp_source.html#l00080">optimization_algorithm_with_hessian.cpp:80</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Vertex_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Vertex.html">g2o::OptimizableGraph::Vertex</a></div><div class="ttdoc">A general case Vertex for optimization. </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00107">optimizable_graph.h:107</a></div></div>
<div class="ttc" id="classg2o_1_1HyperGraph_1_1Vertex_html"><div class="ttname"><a href="classg2o_1_1HyperGraph_1_1Vertex.html">g2o::HyperGraph::Vertex</a></div><div class="ttdoc">abstract Vertex, your types must derive from that one </div><div class="ttdef"><b>Definition:</b> <a href="hyper__graph_8h_source.html#l00142">hyper_graph.h:142</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_aedb6be89610973ae2dc4ca17e8608360"><div class="ttname"><a href="structg2o_1_1Star.html#aedb6be89610973ae2dc4ca17e8608360">g2o::Star::lowLevelEdges</a></div><div class="ttdeci">HyperGraph::EdgeSet &amp; lowLevelEdges()</div><div class="ttdoc">low level edge set </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00043">star.h:43</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a68b59bf6d56a390717b82b3ae009ccf0"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a68b59bf6d56a390717b82b3ae009ccf0">g2o::SparseOptimizer::findActiveEdge</a></div><div class="ttdeci">EdgeContainer::const_iterator findActiveEdge(const OptimizableGraph::Edge *e) const </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00515">sparse_optimizer.cpp:515</a></div></div>
<div class="ttc" id="structg2o_1_1HyperDijkstra_html_ace002e09514a2eeb76a7b569f9e30f6c"><div class="ttname"><a href="structg2o_1_1HyperDijkstra.html#ace002e09514a2eeb76a7b569f9e30f6c">g2o::HyperDijkstra::adjacencyMap</a></div><div class="ttdeci">AdjacencyMap &amp; adjacencyMap()</div><div class="ttdef"><b>Definition:</b> <a href="hyper__dijkstra_8h_source.html#l00073">hyper_dijkstra.h:73</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html">g2o::SparseOptimizer</a></div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8h_source.html#l00046">sparse_optimizer.h:46</a></div></div>
<div class="ttc" id="namespaceg2o_html_a1cf1ad10ed8be518d2e0ace44203075c"><div class="ttname"><a href="namespaceg2o.html#a1cf1ad10ed8be518d2e0ace44203075c">g2o::vertexEdgesInStar</a></div><div class="ttdeci">size_t vertexEdgesInStar(HyperGraph::EdgeSet &amp;eset, HyperGraph::Vertex *v, Star *s, EdgeStarMap &amp;esmap)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00055">simple_star_ops.cpp:55</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a07514f6186d19b6d893a771c0bb6abf9"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a07514f6186d19b6d893a771c0bb6abf9">g2o::OptimizableGraph::setFixed</a></div><div class="ttdeci">virtual void setFixed(HyperGraph::VertexSet &amp;vset, bool fixed)</div><div class="ttdoc">fixes/releases a set of vertices </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00373">optimizable_graph.cpp:373</a></div></div>
<div class="ttc" id="namespaceg2o_html_a002030b394634498fb6e5321a332a045"><div class="ttname"><a href="namespaceg2o.html#a002030b394634498fb6e5321a332a045">g2o::computeSimpleStars</a></div><div class="ttdeci">void computeSimpleStars(StarSet &amp;stars, SparseOptimizer *optimizer, EdgeLabeler *labeler, EdgeCreator *creator, OptimizableGraph::Vertex *gauge_, std::string edgeTag, std::string vertexTag, int level, int step, int backboneIterations, int starIterations, double rejectionThreshold, bool debug)</div><div class="ttdef"><b>Definition:</b> <a href="simple__star__ops_8cpp_source.html#l00167">simple_star_ops.cpp:167</a></div></div>
<div class="ttc" id="structg2o_1_1EdgeTypesCostFunction_html"><div class="ttname"><a href="structg2o_1_1EdgeTypesCostFunction.html">g2o::EdgeTypesCostFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="edge__types__cost__function_8h_source.html#l00015">edge_types_cost_function.h:15</a></div></div>
<div class="ttc" id="structg2o_1_1Star_html_a517fcb771c208fe07f85a2afbf03fa67"><div class="ttname"><a href="structg2o_1_1Star.html#a517fcb771c208fe07f85a2afbf03fa67">g2o::Star::gauge</a></div><div class="ttdeci">HyperGraph::VertexSet &amp; gauge()</div><div class="ttdoc">set of nodes to keep fixed in the optimization </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00049">star.h:49</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html_ab3e4290bc51d03ba294f36254048b15a"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html#ab3e4290bc51d03ba294f36254048b15a">g2o::OptimizableGraph::Edge::setLevel</a></div><div class="ttdeci">void setLevel(int l)</div><div class="ttdoc">sets the level of the edge </div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00437">optimizable_graph.h:437</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a56c0c13954ac7204cfb031c141ece9ae"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae">g2o::SparseOptimizer::initializeOptimization</a></div><div class="ttdeci">virtual bool initializeOptimization(HyperGraph::EdgeSet &amp;eset)</div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00272">sparse_optimizer.cpp:272</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_a08833d6f9ae487f5608f6113f3635b6b"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#a08833d6f9ae487f5608f6113f3635b6b">g2o::SparseOptimizer::push</a></div><div class="ttdeci">void push(SparseOptimizer::VertexContainer &amp;vlist)</div><div class="ttdoc">push the estimate of a subset of the variables onto a stack </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00525">sparse_optimizer.cpp:525</a></div></div>
<div class="ttc" id="structg2o_1_1OptimizableGraph_html_a6831ed69fce3dba691f53302a2813070"><div class="ttname"><a href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070">g2o::OptimizableGraph::addEdge</a></div><div class="ttdeci">virtual bool addEdge(HyperGraph::Edge *e)</div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8cpp_source.html#l00257">optimizable_graph.cpp:257</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizableGraph_1_1Edge_html"><div class="ttname"><a href="classg2o_1_1OptimizableGraph_1_1Edge.html">g2o::OptimizableGraph::Edge</a></div><div class="ttdef"><b>Definition:</b> <a href="optimizable__graph_8h_source.html#l00349">optimizable_graph.h:349</a></div></div>
<div class="ttc" id="classg2o_1_1OptimizationAlgorithmWithHessian_html_a3ceacb3dddb14121b03e0afe7b7cfeaa"><div class="ttname"><a href="classg2o_1_1OptimizationAlgorithmWithHessian.html#a3ceacb3dddb14121b03e0afe7b7cfeaa">g2o::OptimizationAlgorithmWithHessian::updateLinearSystem</a></div><div class="ttdeci">virtual void updateLinearSystem()</div><div class="ttdef"><b>Definition:</b> <a href="optimization__algorithm__with__hessian_8cpp_source.html#l00085">optimization_algorithm_with_hessian.cpp:85</a></div></div>
<div class="ttc" id="flex__scanner_8cpp_html_a0ae3dd348a36ca620e2a3416abe1337f"><div class="ttname"><a href="flex__scanner_8cpp.html#a0ae3dd348a36ca620e2a3416abe1337f">step</a></div><div class="ttdeci">yylloc step()</div></div>
<div class="ttc" id="structg2o_1_1Star_html_a2f066793d909aebbf4547455703e7d63"><div class="ttname"><a href="structg2o_1_1Star.html#a2f066793d909aebbf4547455703e7d63">g2o::Star::lowLevelVertices</a></div><div class="ttdeci">HyperGraph::VertexSet &amp; lowLevelVertices()</div><div class="ttdoc">set of all vertices in the low level </div><div class="ttdef"><b>Definition:</b> <a href="star_8h_source.html#l00051">star.h:51</a></div></div>
<div class="ttc" id="classg2o_1_1SparseOptimizer_html_add4d83073e22dbb48b66b953d0185ffa"><div class="ttname"><a href="classg2o_1_1SparseOptimizer.html#add4d83073e22dbb48b66b953d0185ffa">g2o::SparseOptimizer::activeChi2</a></div><div class="ttdeci">double activeChi2() const </div><div class="ttdef"><b>Definition:</b> <a href="sparse__optimizer_8cpp_source.html#l00090">sparse_optimizer.cpp:90</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 18 2019 20:14:36 for g2o by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
